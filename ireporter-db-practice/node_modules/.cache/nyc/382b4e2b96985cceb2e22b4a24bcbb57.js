'use strict';var cov_je7es20xe=function(){var path="/home/enejakc/Documents/projects/ireporter-db-practice/server/validators/emailChecker.js",hash="4dc4ba52204c2b6a98036199851eed0dae244c7f",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/enejakc/Documents/projects/ireporter-db-practice/server/validators/emailChecker.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:18},end:{line:208,column:1}},"2":{start:{line:10,column:18},end:{line:10,column:40}},"3":{start:{line:11,column:20},end:{line:11,column:38}},"4":{start:{line:12,column:16},end:{line:12,column:39}},"5":{start:{line:13,column:8},end:{line:17,column:9}},"6":{start:{line:14,column:12},end:{line:14,column:24}},"7":{start:{line:16,column:12},end:{line:16,column:25}},"8":{start:{line:22,column:18},end:{line:22,column:40}},"9":{start:{line:23,column:20},end:{line:23,column:38}},"10":{start:{line:24,column:16},end:{line:24,column:39}},"11":{start:{line:25,column:8},end:{line:29,column:9}},"12":{start:{line:26,column:12},end:{line:26,column:24}},"13":{start:{line:28,column:12},end:{line:28,column:25}},"14":{start:{line:34,column:18},end:{line:34,column:40}},"15":{start:{line:35,column:20},end:{line:35,column:38}},"16":{start:{line:36,column:16},end:{line:36,column:39}},"17":{start:{line:37,column:8},end:{line:41,column:9}},"18":{start:{line:38,column:12},end:{line:38,column:24}},"19":{start:{line:40,column:12},end:{line:40,column:25}},"20":{start:{line:46,column:8},end:{line:48,column:9}},"21":{start:{line:47,column:12},end:{line:47,column:24}},"22":{start:{line:49,column:8},end:{line:51,column:9}},"23":{start:{line:50,column:12},end:{line:50,column:24}},"24":{start:{line:52,column:8},end:{line:54,column:9}},"25":{start:{line:53,column:12},end:{line:53,column:24}},"26":{start:{line:55,column:8},end:{line:57,column:9}},"27":{start:{line:56,column:12},end:{line:56,column:24}},"28":{start:{line:58,column:8},end:{line:60,column:9}},"29":{start:{line:59,column:12},end:{line:59,column:24}},"30":{start:{line:62,column:8},end:{line:62,column:21}},"31":{start:{line:75,column:18},end:{line:75,column:20}},"32":{start:{line:78,column:8},end:{line:81,column:9}},"33":{start:{line:79,column:12},end:{line:79,column:55}},"34":{start:{line:80,column:12},end:{line:80,column:49}},"35":{start:{line:82,column:21},end:{line:82,column:26}},"36":{start:{line:83,column:18},end:{line:83,column:38}},"37":{start:{line:84,column:20},end:{line:84,column:36}},"38":{start:{line:85,column:23},end:{line:85,column:36}},"39":{start:{line:86,column:19},end:{line:86,column:34}},"40":{start:{line:87,column:22},end:{line:87,column:34}},"41":{start:{line:88,column:29},end:{line:88,column:56}},"42":{start:{line:91,column:8},end:{line:93,column:9}},"43":{start:{line:92,column:12},end:{line:92,column:26}},"44":{start:{line:95,column:8},end:{line:98,column:9}},"45":{start:{line:96,column:12},end:{line:96,column:89}},"46":{start:{line:97,column:12},end:{line:97,column:49}},"47":{start:{line:100,column:8},end:{line:103,column:9}},"48":{start:{line:101,column:12},end:{line:101,column:87}},"49":{start:{line:102,column:12},end:{line:102,column:49}},"50":{start:{line:105,column:8},end:{line:108,column:9}},"51":{start:{line:106,column:12},end:{line:106,column:91}},"52":{start:{line:107,column:12},end:{line:107,column:49}},"53":{start:{line:110,column:8},end:{line:113,column:9}},"54":{start:{line:111,column:12},end:{line:111,column:90}},"55":{start:{line:112,column:12},end:{line:112,column:49}},"56":{start:{line:116,column:8},end:{line:119,column:9}},"57":{start:{line:117,column:12},end:{line:117,column:109}},"58":{start:{line:118,column:12},end:{line:118,column:49}},"59":{start:{line:122,column:16},end:{line:122,column:18}},"60":{start:{line:123,column:8},end:{line:131,column:9}},"61":{start:{line:124,column:12},end:{line:124,column:39}},"62":{start:{line:126,column:20},end:{line:126,column:25}},"63":{start:{line:127,column:12},end:{line:130,column:13}},"64":{start:{line:128,column:16},end:{line:128,column:95}},"65":{start:{line:129,column:16},end:{line:129,column:53}},"66":{start:{line:134,column:8},end:{line:137,column:9}},"67":{start:{line:135,column:12},end:{line:135,column:73}},"68":{start:{line:136,column:12},end:{line:136,column:49}},"69":{start:{line:140,column:8},end:{line:143,column:9}},"70":{start:{line:141,column:12},end:{line:141,column:88}},"71":{start:{line:142,column:12},end:{line:142,column:49}},"72":{start:{line:146,column:8},end:{line:151,column:9}},"73":{start:{line:147,column:12},end:{line:150,column:13}},"74":{start:{line:148,column:16},end:{line:148,column:90}},"75":{start:{line:149,column:16},end:{line:149,column:53}},"76":{start:{line:156,column:8},end:{line:161,column:9}},"77":{start:{line:157,column:12},end:{line:160,column:13}},"78":{start:{line:158,column:16},end:{line:158,column:91}},"79":{start:{line:159,column:16},end:{line:159,column:53}},"80":{start:{line:164,column:16},end:{line:164,column:18}},"81":{start:{line:165,column:8},end:{line:172,column:9}},"82":{start:{line:166,column:12},end:{line:166,column:40}},"83":{start:{line:167,column:20},end:{line:167,column:25}},"84":{start:{line:168,column:12},end:{line:171,column:13}},"85":{start:{line:169,column:16},end:{line:169,column:72}},"86":{start:{line:170,column:16},end:{line:170,column:53}},"87":{start:{line:175,column:8},end:{line:178,column:9}},"88":{start:{line:176,column:12},end:{line:176,column:56}},"89":{start:{line:177,column:12},end:{line:177,column:49}},"90":{start:{line:180,column:8},end:{line:183,column:9}},"91":{start:{line:181,column:12},end:{line:181,column:77}},"92":{start:{line:182,column:12},end:{line:182,column:49}},"93":{start:{line:186,column:8},end:{line:189,column:9}},"94":{start:{line:187,column:12},end:{line:187,column:74}},"95":{start:{line:188,column:12},end:{line:188,column:49}},"96":{start:{line:192,column:8},end:{line:197,column:9}},"97":{start:{line:193,column:12},end:{line:196,column:13}},"98":{start:{line:194,column:16},end:{line:194,column:98}},"99":{start:{line:195,column:16},end:{line:195,column:53}},"100":{start:{line:200,column:8},end:{line:203,column:9}},"101":{start:{line:201,column:12},end:{line:201,column:83}},"102":{start:{line:202,column:12},end:{line:202,column:49}},"103":{start:{line:206,column:8},end:{line:206,column:59}},"104":{start:{line:210,column:0},end:{line:210,column:28}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:4},end:{line:9,column:5}},loc:{start:{line:9,column:18},end:{line:18,column:5}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:21,column:4},end:{line:21,column:5}},loc:{start:{line:21,column:18},end:{line:30,column:5}},line:21},"2":{name:"(anonymous_2)",decl:{start:{line:33,column:4},end:{line:33,column:5}},loc:{start:{line:33,column:18},end:{line:42,column:5}},line:33},"3":{name:"(anonymous_3)",decl:{start:{line:45,column:4},end:{line:45,column:5}},loc:{start:{line:45,column:30},end:{line:63,column:5}},line:45},"4":{name:"(anonymous_4)",decl:{start:{line:74,column:4},end:{line:74,column:5}},loc:{start:{line:74,column:21},end:{line:207,column:5}},line:74}},branchMap:{"0":{loc:{start:{line:13,column:8},end:{line:17,column:9}},type:"if",locations:[{start:{line:13,column:8},end:{line:17,column:9}},{start:{line:13,column:8},end:{line:17,column:9}}],line:13},"1":{loc:{start:{line:25,column:8},end:{line:29,column:9}},type:"if",locations:[{start:{line:25,column:8},end:{line:29,column:9}},{start:{line:25,column:8},end:{line:29,column:9}}],line:25},"2":{loc:{start:{line:37,column:8},end:{line:41,column:9}},type:"if",locations:[{start:{line:37,column:8},end:{line:41,column:9}},{start:{line:37,column:8},end:{line:41,column:9}}],line:37},"3":{loc:{start:{line:46,column:8},end:{line:48,column:9}},type:"if",locations:[{start:{line:46,column:8},end:{line:48,column:9}},{start:{line:46,column:8},end:{line:48,column:9}}],line:46},"4":{loc:{start:{line:46,column:12},end:{line:46,column:66}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:37}},{start:{line:46,column:41},end:{line:46,column:66}}],line:46},"5":{loc:{start:{line:49,column:8},end:{line:51,column:9}},type:"if",locations:[{start:{line:49,column:8},end:{line:51,column:9}},{start:{line:49,column:8},end:{line:51,column:9}}],line:49},"6":{loc:{start:{line:49,column:12},end:{line:49,column:67}},type:"binary-expr",locations:[{start:{line:49,column:12},end:{line:49,column:37}},{start:{line:49,column:41},end:{line:49,column:67}}],line:49},"7":{loc:{start:{line:52,column:8},end:{line:54,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:54,column:9}},{start:{line:52,column:8},end:{line:54,column:9}}],line:52},"8":{loc:{start:{line:52,column:12},end:{line:52,column:50}},type:"binary-expr",locations:[{start:{line:52,column:12},end:{line:52,column:24}},{start:{line:52,column:28},end:{line:52,column:50}}],line:52},"9":{loc:{start:{line:55,column:8},end:{line:57,column:9}},type:"if",locations:[{start:{line:55,column:8},end:{line:57,column:9}},{start:{line:55,column:8},end:{line:57,column:9}}],line:55},"10":{loc:{start:{line:58,column:8},end:{line:60,column:9}},type:"if",locations:[{start:{line:58,column:8},end:{line:60,column:9}},{start:{line:58,column:8},end:{line:60,column:9}}],line:58},"11":{loc:{start:{line:78,column:8},end:{line:81,column:9}},type:"if",locations:[{start:{line:78,column:8},end:{line:81,column:9}},{start:{line:78,column:8},end:{line:81,column:9}}],line:78},"12":{loc:{start:{line:91,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:91,column:8},end:{line:93,column:9}},{start:{line:91,column:8},end:{line:93,column:9}}],line:91},"13":{loc:{start:{line:91,column:12},end:{line:91,column:54}},type:"binary-expr",locations:[{start:{line:91,column:12},end:{line:91,column:25}},{start:{line:91,column:29},end:{line:91,column:54}}],line:91},"14":{loc:{start:{line:95,column:8},end:{line:98,column:9}},type:"if",locations:[{start:{line:95,column:8},end:{line:98,column:9}},{start:{line:95,column:8},end:{line:98,column:9}}],line:95},"15":{loc:{start:{line:100,column:8},end:{line:103,column:9}},type:"if",locations:[{start:{line:100,column:8},end:{line:103,column:9}},{start:{line:100,column:8},end:{line:103,column:9}}],line:100},"16":{loc:{start:{line:105,column:8},end:{line:108,column:9}},type:"if",locations:[{start:{line:105,column:8},end:{line:108,column:9}},{start:{line:105,column:8},end:{line:108,column:9}}],line:105},"17":{loc:{start:{line:110,column:8},end:{line:113,column:9}},type:"if",locations:[{start:{line:110,column:8},end:{line:113,column:9}},{start:{line:110,column:8},end:{line:113,column:9}}],line:110},"18":{loc:{start:{line:116,column:8},end:{line:119,column:9}},type:"if",locations:[{start:{line:116,column:8},end:{line:119,column:9}},{start:{line:116,column:8},end:{line:119,column:9}}],line:116},"19":{loc:{start:{line:116,column:12},end:{line:116,column:63}},type:"binary-expr",locations:[{start:{line:116,column:12},end:{line:116,column:28}},{start:{line:116,column:32},end:{line:116,column:63}}],line:116},"20":{loc:{start:{line:127,column:12},end:{line:130,column:13}},type:"if",locations:[{start:{line:127,column:12},end:{line:130,column:13}},{start:{line:127,column:12},end:{line:130,column:13}}],line:127},"21":{loc:{start:{line:134,column:8},end:{line:137,column:9}},type:"if",locations:[{start:{line:134,column:8},end:{line:137,column:9}},{start:{line:134,column:8},end:{line:137,column:9}}],line:134},"22":{loc:{start:{line:134,column:12},end:{line:134,column:43}},type:"binary-expr",locations:[{start:{line:134,column:12},end:{line:134,column:32}},{start:{line:134,column:36},end:{line:134,column:43}}],line:134},"23":{loc:{start:{line:140,column:8},end:{line:143,column:9}},type:"if",locations:[{start:{line:140,column:8},end:{line:143,column:9}},{start:{line:140,column:8},end:{line:143,column:9}}],line:140},"24":{loc:{start:{line:140,column:12},end:{line:140,column:43}},type:"binary-expr",locations:[{start:{line:140,column:12},end:{line:140,column:32}},{start:{line:140,column:36},end:{line:140,column:43}}],line:140},"25":{loc:{start:{line:147,column:12},end:{line:150,column:13}},type:"if",locations:[{start:{line:147,column:12},end:{line:150,column:13}},{start:{line:147,column:12},end:{line:150,column:13}}],line:147},"26":{loc:{start:{line:147,column:16},end:{line:147,column:59}},type:"binary-expr",locations:[{start:{line:147,column:16},end:{line:147,column:48}},{start:{line:147,column:52},end:{line:147,column:59}}],line:147},"27":{loc:{start:{line:157,column:12},end:{line:160,column:13}},type:"if",locations:[{start:{line:157,column:12},end:{line:160,column:13}},{start:{line:157,column:12},end:{line:160,column:13}}],line:157},"28":{loc:{start:{line:168,column:12},end:{line:171,column:13}},type:"if",locations:[{start:{line:168,column:12},end:{line:171,column:13}},{start:{line:168,column:12},end:{line:171,column:13}}],line:168},"29":{loc:{start:{line:175,column:8},end:{line:178,column:9}},type:"if",locations:[{start:{line:175,column:8},end:{line:178,column:9}},{start:{line:175,column:8},end:{line:178,column:9}}],line:175},"30":{loc:{start:{line:180,column:8},end:{line:183,column:9}},type:"if",locations:[{start:{line:180,column:8},end:{line:183,column:9}},{start:{line:180,column:8},end:{line:183,column:9}}],line:180},"31":{loc:{start:{line:180,column:12},end:{line:180,column:71}},type:"binary-expr",locations:[{start:{line:180,column:12},end:{line:180,column:29}},{start:{line:180,column:33},end:{line:180,column:50}},{start:{line:180,column:54},end:{line:180,column:71}}],line:180},"32":{loc:{start:{line:186,column:8},end:{line:189,column:9}},type:"if",locations:[{start:{line:186,column:8},end:{line:189,column:9}},{start:{line:186,column:8},end:{line:189,column:9}}],line:186},"33":{loc:{start:{line:193,column:12},end:{line:196,column:13}},type:"if",locations:[{start:{line:193,column:12},end:{line:196,column:13}},{start:{line:193,column:12},end:{line:196,column:13}}],line:193},"34":{loc:{start:{line:200,column:8},end:{line:203,column:9}},type:"if",locations:[{start:{line:200,column:8},end:{line:203,column:9}},{start:{line:200,column:8},end:{line:203,column:9}}],line:200}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0,0],"32":[0,0],"33":[0,0],"34":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_je7es20xe.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});/* eslint-disable */const emailTest=(cov_je7es20xe.s[1]++,{// Return true is an email ends with '.com', else return false
dotCom(email){cov_je7es20xe.f[0]++;const i=(cov_je7es20xe.s[2]++,email.lastIndexOf('@'));const dom=(cov_je7es20xe.s[3]++,email.slice(i+1));let d=(cov_je7es20xe.s[4]++,dom.lastIndexOf('.com'));cov_je7es20xe.s[5]++;if(dom[d+4]===undefined){cov_je7es20xe.b[0][0]++;cov_je7es20xe.s[6]++;return true;}else{cov_je7es20xe.b[0][1]++;cov_je7es20xe.s[7]++;return false;}},// Return true is an email ends with '.org', else return false
dotOrg(email){cov_je7es20xe.f[1]++;const i=(cov_je7es20xe.s[8]++,email.lastIndexOf('@'));const dom=(cov_je7es20xe.s[9]++,email.slice(i+1));let d=(cov_je7es20xe.s[10]++,dom.lastIndexOf('.org'));cov_je7es20xe.s[11]++;if(dom[d+4]===undefined){cov_je7es20xe.b[1][0]++;cov_je7es20xe.s[12]++;return true;}else{cov_je7es20xe.b[1][1]++;cov_je7es20xe.s[13]++;return false;}},// Return true is an email ends with '.org', else return false
dotNet(email){cov_je7es20xe.f[2]++;const i=(cov_je7es20xe.s[14]++,email.lastIndexOf('@'));const dom=(cov_je7es20xe.s[15]++,email.slice(i+1));let d=(cov_je7es20xe.s[16]++,dom.lastIndexOf('.net'));cov_je7es20xe.s[17]++;if(dom[d+4]===undefined){cov_je7es20xe.b[2][0]++;cov_je7es20xe.s[18]++;return true;}else{cov_je7es20xe.b[2][1]++;cov_je7es20xe.s[19]++;return false;}},// Return false if the domain name contains an invalid character
isValidDomChar(char,dom){cov_je7es20xe.f[3]++;cov_je7es20xe.s[20]++;if((cov_je7es20xe.b[4][0]++,char.codePointAt(0)>=65)&&(cov_je7es20xe.b[4][1]++,char.codePointAt(0)<=90)){cov_je7es20xe.b[3][0]++;cov_je7es20xe.s[21]++;return true;}else{cov_je7es20xe.b[3][1]++;}cov_je7es20xe.s[22]++;if((cov_je7es20xe.b[6][0]++,char.codePointAt(0)>=97)&&(cov_je7es20xe.b[6][1]++,char.codePointAt(0)<=122)){cov_je7es20xe.b[5][0]++;cov_je7es20xe.s[23]++;return true;}else{cov_je7es20xe.b[5][1]++;}cov_je7es20xe.s[24]++;if((cov_je7es20xe.b[8][0]++,char==='-')&&(cov_je7es20xe.b[8][1]++,dom.indexOf(char)!=0)){cov_je7es20xe.b[7][0]++;cov_je7es20xe.s[25]++;return true;}else{cov_je7es20xe.b[7][1]++;}cov_je7es20xe.s[26]++;if(char==='.'){cov_je7es20xe.b[9][0]++;cov_je7es20xe.s[27]++;return true;}else{cov_je7es20xe.b[9][1]++;}cov_je7es20xe.s[28]++;if(!isNaN(Number(char))){cov_je7es20xe.b[10][0]++;cov_je7es20xe.s[29]++;return true;}else{cov_je7es20xe.b[10][1]++;}cov_je7es20xe.s[30]++;return false;},// format of email address is [ local-part@domain ]
/**
     * Method to verify the email
     * @param {string} email to be verified (var str),  
     * @returns {object} an object with two properties
     *        error: true for invalid email, and false for valid email
     *        message: contains info about the email or the error 
     */verifyEmail(str){cov_je7es20xe.f[4]++;let msg=(cov_je7es20xe.s[31]++,'');// If mail does not contain '@' return error
cov_je7es20xe.s[32]++;if(str.indexOf('@')<0){cov_je7es20xe.b[11][0]++;cov_je7es20xe.s[33]++;msg=`email is missing the '@' character`;cov_je7es20xe.s[34]++;return{error:true,message:msg};}else{cov_je7es20xe.b[11][1]++;}let quoted=(cov_je7es20xe.s[35]++,false);const i=(cov_je7es20xe.s[36]++,str.lastIndexOf('@'));const dom=(cov_je7es20xe.s[37]++,str.slice(i+1));const domArr=(cov_je7es20xe.s[38]++,dom.split(''));const lp=(cov_je7es20xe.s[39]++,str.slice(0,i));const lpArr=(cov_je7es20xe.s[40]++,lp.split(''));const specialChars=(cov_je7es20xe.s[41]++,`"^'(),:;<>@[\\]`.split(''));// To determine whether the local-part of email is quoted (in double quotation marks)
cov_je7es20xe.s[42]++;if((cov_je7es20xe.b[13][0]++,lp[0]===`"`)&&(cov_je7es20xe.b[13][1]++,lp[lp.length-1]===`"`)){cov_je7es20xe.b[12][0]++;cov_je7es20xe.s[43]++;quoted=true;}else{cov_je7es20xe.b[12][1]++;}cov_je7es20xe.s[44]++;if(lp.length<1){cov_je7es20xe.b[14][0]++;cov_je7es20xe.s[45]++;msg=`your email is missing the username part. Format: [username]@[domain]`;cov_je7es20xe.s[46]++;return{error:true,message:msg};}else{cov_je7es20xe.b[14][1]++;}cov_je7es20xe.s[47]++;if(dom.length<1){cov_je7es20xe.b[15][0]++;cov_je7es20xe.s[48]++;msg=`your email is missing the domain part. Format: [username]@[domain]`;cov_je7es20xe.s[49]++;return{error:true,message:msg};}else{cov_je7es20xe.b[15][1]++;}cov_je7es20xe.s[50]++;if(lp.length>64){cov_je7es20xe.b[16][0]++;cov_je7es20xe.s[51]++;msg=`the username part of your email cannot contain more than 64 characters`;cov_je7es20xe.s[52]++;return{error:true,message:msg};}else{cov_je7es20xe.b[16][1]++;}cov_je7es20xe.s[53]++;if(dom.length>255){cov_je7es20xe.b[17][0]++;cov_je7es20xe.s[54]++;msg=`the domain part of your email cannot contain more than 255 characters`;cov_je7es20xe.s[55]++;return{error:true,message:msg};}else{cov_je7es20xe.b[17][1]++;}// local-part cannot start or end with a dot
cov_je7es20xe.s[56]++;if((cov_je7es20xe.b[19][0]++,lpArr[0]==='.')||(cov_je7es20xe.b[19][1]++,lpArr[lpArr.length-1]==='.')){cov_je7es20xe.b[18][0]++;cov_je7es20xe.s[57]++;msg=`a dot (.) cannot start or end username part of your email, the username is unless quoted`;cov_je7es20xe.s[58]++;return{error:true,message:msg};}else{cov_je7es20xe.b[18][1]++;}// email (local-part) name should not contain consecutive dots
let x=(cov_je7es20xe.s[59]++,-1);cov_je7es20xe.s[60]++;for(let i=0;i<lp.length;i++){cov_je7es20xe.s[61]++;x=lp.indexOf('.',x+1);// starts from index 0, and finds the next instance of '.' with every loop
// console.log(x);
let y=(cov_je7es20xe.s[62]++,x+1);// n is index of the next character following the current dot
cov_je7es20xe.s[63]++;if(lp[x]===lp[y]){cov_je7es20xe.b[20][0]++;cov_je7es20xe.s[64]++;msg=`email: consecutive dots are not allowed, unless the username is quoted`;cov_je7es20xe.s[65]++;return{error:true,message:msg};}else{cov_je7es20xe.b[20][1]++;}}// cannot contain more than one @ without quotes
cov_je7es20xe.s[66]++;if((cov_je7es20xe.b[22][0]++,lp.indexOf('@')>-1)&&(cov_je7es20xe.b[22][1]++,!quoted)){cov_je7es20xe.b[21][0]++;cov_je7es20xe.s[67]++;msg=`email: only one @ is allowed outside quotation marks`;cov_je7es20xe.s[68]++;return{error:true,message:msg};}else{cov_je7es20xe.b[21][1]++;}// cannot contain a space without quotes
cov_je7es20xe.s[69]++;if((cov_je7es20xe.b[24][0]++,lp.indexOf(' ')>-1)&&(cov_je7es20xe.b[24][1]++,!quoted)){cov_je7es20xe.b[23][0]++;cov_je7es20xe.s[70]++;msg=`email username cannot contain spaces, unless the username is quoted`;cov_je7es20xe.s[71]++;return{error:true,message:msg};}else{cov_je7es20xe.b[23][1]++;}// cannot contain some special chars like "(),:;<>@[\\] without qoutes
cov_je7es20xe.s[72]++;for(let i=0;i<specialChars.length;i++){cov_je7es20xe.s[73]++;if((cov_je7es20xe.b[26][0]++,lp.indexOf(specialChars[i])>-1)&&(cov_je7es20xe.b[26][1]++,!quoted)){cov_je7es20xe.b[25][0]++;cov_je7es20xe.s[74]++;msg=`email cannot contain '${specialChars[i]}' outside quotation marks`;cov_je7es20xe.s[75]++;return{error:true,message:msg};}else{cov_je7es20xe.b[25][1]++;}}// Should not contain line formatting characters like \n.
// Recall: Line formatting characters fall within the range
// of character codes from 0 to 32
cov_je7es20xe.s[76]++;for(let i=0;i<32;i++){cov_je7es20xe.s[77]++;if(lp.indexOf(String.fromCodePoint(i))>-1){cov_je7es20xe.b[27][0]++;cov_je7es20xe.s[78]++;msg=`email cannot contain line formatting characters like \\n, \\t, etc`;cov_je7es20xe.s[79]++;return{error:true,message:msg};}else{cov_je7es20xe.b[27][1]++;}}// Domain name should not contain consecutive dots
let m=(cov_je7es20xe.s[80]++,-1);cov_je7es20xe.s[81]++;for(let i=0;i<dom.length;i++){cov_je7es20xe.s[82]++;m=dom.indexOf('.',m+1);// starts from index 0, and finds the next instance of '.' with every loop
let n=(cov_je7es20xe.s[83]++,m+1);// n is index of the next character following the current dot
cov_je7es20xe.s[84]++;if(domArr[m]===domArr[n]){cov_je7es20xe.b[28][0]++;cov_je7es20xe.s[85]++;msg=`email: consecutive dots after @ is not allowed.`;cov_je7es20xe.s[86]++;return{error:true,message:msg};}else{cov_je7es20xe.b[28][1]++;}}// domain name connot contain spaces
cov_je7es20xe.s[87]++;if(dom.indexOf(' ')>-1){cov_je7es20xe.b[29][0]++;cov_je7es20xe.s[88]++;msg=`email cannot contain spaces after @`;cov_je7es20xe.s[89]++;return{error:true,message:msg};}else{cov_je7es20xe.b[29][1]++;}// domain should end with .com, .org, .net, ...
cov_je7es20xe.s[90]++;if((cov_je7es20xe.b[31][0]++,!this.dotCom(str))&&(cov_je7es20xe.b[31][1]++,!this.dotOrg(str))&&(cov_je7es20xe.b[31][2]++,!this.dotNet(str))){cov_je7es20xe.b[30][0]++;cov_je7es20xe.s[91]++;msg=`email domain name must end with '.com', '.org' or '.net'`;cov_je7es20xe.s[92]++;return{error:true,message:msg};}else{cov_je7es20xe.b[30][1]++;}// leading dash in front of domain is invalid
cov_je7es20xe.s[93]++;if(dom[0]==='-'){cov_je7es20xe.b[32][0]++;cov_je7es20xe.s[94]++;msg=`email: leading dash in front of domain is not allowed`;cov_je7es20xe.s[95]++;return{error:true,message:msg};}else{cov_je7es20xe.b[32][1]++;}// Rejects special characters in the domain name except '.' and non-leading dash (-)
cov_je7es20xe.s[96]++;for(let i=0;i<dom.length;i++){cov_je7es20xe.s[97]++;if(!this.isValidDomChar(dom[i],dom)){cov_je7es20xe.b[33][0]++;cov_je7es20xe.s[98]++;msg=`email: special characters like " ${dom[i]} " is not allowed in the domain`;cov_je7es20xe.s[99]++;return{error:true,message:msg};}else{cov_je7es20xe.b[33][1]++;}}// Return false if there is no dot in the domain (there must be a .*)
cov_je7es20xe.s[100]++;if(dom.indexOf('.')<0){cov_je7es20xe.b[34][0]++;cov_je7es20xe.s[101]++;msg=`your email has an invalid domain name. Use .com, .org, or .net`;cov_je7es20xe.s[102]++;return{error:true,message:msg};}else{cov_je7es20xe.b[34][1]++;}// If an email passes all the tests above, then return this:
cov_je7es20xe.s[103]++;return{error:false,message:'email is valid'};}});cov_je7es20xe.s[104]++;exports.default=emailTest;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVtYWlsQ2hlY2tlci5qcyJdLCJuYW1lcyI6WyJlbWFpbFRlc3QiLCJkb3RDb20iLCJlbWFpbCIsImkiLCJsYXN0SW5kZXhPZiIsImRvbSIsInNsaWNlIiwiZCIsInVuZGVmaW5lZCIsImRvdE9yZyIsImRvdE5ldCIsImlzVmFsaWREb21DaGFyIiwiY2hhciIsImNvZGVQb2ludEF0IiwiaW5kZXhPZiIsImlzTmFOIiwiTnVtYmVyIiwidmVyaWZ5RW1haWwiLCJzdHIiLCJtc2ciLCJlcnJvciIsIm1lc3NhZ2UiLCJxdW90ZWQiLCJkb21BcnIiLCJzcGxpdCIsImxwIiwibHBBcnIiLCJzcGVjaWFsQ2hhcnMiLCJsZW5ndGgiLCJ4IiwieSIsIlN0cmluZyIsImZyb21Db2RlUG9pbnQiLCJtIiwibiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBLE1BQU1BLFlBQVk7QUFDZDtBQUNBQyxXQUFPQyxLQUFQLEVBQWM7QUFDVixjQUFNQyxJQUFJRCxNQUFNRSxXQUFOLENBQWtCLEdBQWxCLENBQVY7QUFDQSxjQUFNQyxNQUFNSCxNQUFNSSxLQUFOLENBQVlILElBQUksQ0FBaEIsQ0FBWjtBQUNBLFlBQUlJLElBQUlGLElBQUlELFdBQUosQ0FBZ0IsTUFBaEIsQ0FBUjtBQUNBLFlBQUlDLElBQUlFLElBQUksQ0FBUixNQUFlQyxTQUFuQixFQUE4QjtBQUMxQixtQkFBTyxJQUFQO0FBQ0gsU0FGRCxNQUVPO0FBQ0gsbUJBQU8sS0FBUDtBQUNIO0FBQ0osS0FYYTs7QUFhZDtBQUNBQyxXQUFPUCxLQUFQLEVBQWM7QUFDVixjQUFNQyxJQUFJRCxNQUFNRSxXQUFOLENBQWtCLEdBQWxCLENBQVY7QUFDQSxjQUFNQyxNQUFNSCxNQUFNSSxLQUFOLENBQVlILElBQUksQ0FBaEIsQ0FBWjtBQUNBLFlBQUlJLElBQUlGLElBQUlELFdBQUosQ0FBZ0IsTUFBaEIsQ0FBUjtBQUNBLFlBQUlDLElBQUlFLElBQUksQ0FBUixNQUFlQyxTQUFuQixFQUE4QjtBQUMxQixtQkFBTyxJ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QVMsZ0JBQXpCLEVBQVA7QUFFSDtBQTNNYSxDQUFsQjs7a0JBOE1lckIsUyIsImZpbGUiOiJlbWFpbENoZWNrZXIuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvZW5lamFrYy9Eb2N1bWVudHMvcHJvamVjdHMvaXJlcG9ydGVyLWRiLXByYWN0aWNlL3NlcnZlci92YWxpZGF0b3JzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgKi9cbmNvbnN0IGVtYWlsVGVzdCA9IHtcbiAgICAvLyBSZXR1cm4gdHJ1ZSBpcyBhbiBlbWFpbCBlbmRzIHdpdGggJy5jb20nLCBlbHNlIHJldHVybiBmYWxzZVxuICAgIGRvdENvbShlbWFpbCkge1xuICAgICAgICBjb25zdCBpID0gZW1haWwubGFzdEluZGV4T2YoJ0AnKTtcbiAgICAgICAgY29uc3QgZG9tID0gZW1haWwuc2xpY2UoaSArIDEpO1xuICAgICAgICBsZXQgZCA9IGRvbS5sYXN0SW5kZXhPZignLmNvbScpO1xuICAgICAgICBpZiAoZG9tW2QgKyA0XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBSZXR1cm4gdHJ1ZSBpcyBhbiBlbWFpbCBlbmRzIHdpdGggJy5vcmcnLCBlbHNlIHJldHVybiBmYWxzZVxuICAgIGRvdE9yZyhlbWFpbCkge1xuICAgICAgICBjb25zdCBpID0gZW1haWwubGFzdEluZGV4T2YoJ0AnKTtcbiAgICAgICAgY29uc3QgZG9tID0gZW1haWwuc2xpY2UoaSArIDEpO1xuICAgICAgICBsZXQgZCA9IGRvbS5sYXN0SW5kZXhPZignLm9yZycpO1xuICAgICAgICBpZiAoZG9tW2QgKyA0XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBSZXR1cm4gdHJ1ZSBpcyBhbiBlbWFpbCBlbmRzIHdpdGggJy5vcmcnLCBlbHNlIHJldHVybiBmYWxzZVxuICAgIGRvdE5ldChlbWFpbCkge1xuICAgICAgICBjb25zdCBpID0gZW1haWwubGFzdEluZGV4T2YoJ0AnKTtcbiAgICAgICAgY29uc3QgZG9tID0gZW1haWwuc2xpY2UoaSArIDEpO1xuICAgICAgICBsZXQgZCA9IGRvbS5sYXN0SW5kZXhPZignLm5ldCcpO1xuICAgICAgICBpZiAoZG9tW2QgKyA0XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBSZXR1cm4gZmFsc2UgaWYgdGhlIGRvbWFpbiBuYW1lIGNvbnRhaW5zIGFuIGludmFsaWQgY2hhcmFjdGVyXG4gICAgaXNWYWxpZERvbUNoYXIoY2hhciwgZG9tKSB7XG4gICAgICAgIGlmICgoY2hhci5jb2RlUG9pbnRBdCgwKSA+PSA2NSAmJiBjaGFyLmNvZGVQb2ludEF0KDApIDw9IDkwKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChjaGFyLmNvZGVQb2ludEF0KDApID49IDk3ICYmIGNoYXIuY29kZVBvaW50QXQoMCkgPD0gMTIyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChjaGFyID09PSAnLScgJiYgZG9tLmluZGV4T2YoY2hhcikgIT0gMCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFyID09PSAnLicpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKGNoYXIpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8vIGZvcm1hdCBvZiBlbWFpbCBhZGRyZXNzIGlzIFsgbG9jYWwtcGFydEBkb21haW4gXVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byB2ZXJpZnkgdGhlIGVtYWlsXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIHRvIGJlIHZlcmlmaWVkICh2YXIgc3RyKSwgIFxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9IGFuIG9iamVjdCB3aXRoIHR3byBwcm9wZXJ0aWVzXG4gICAgICogICAgICAgIGVycm9yOiB0cnVlIGZvciBpbnZhbGlkIGVtYWlsLCBhbmQgZmFsc2UgZm9yIHZhbGlkIGVtYWlsXG4gICAgICogICAgICAgIG1lc3NhZ2U6IGNvbnRhaW5zIGluZm8gYWJvdXQgdGhlIGVtYWlsIG9yIHRoZSBlcnJvciBcbiAgICAgKi9cblxuICAgIHZlcmlmeUVtYWlsKHN0cikge1xuICAgICAgICBsZXQgbXNnID0gJyc7XG5cbiAgICAgICAgLy8gSWYgbWFpbCBkb2VzIG5vdCBjb250YWluICdAJyByZXR1cm4gZXJyb3JcbiAgICAgICAgaWYgKHN0ci5pbmRleE9mKCdAJykgPCAwKSB7XG4gICAgICAgICAgICBtc2cgPSBgZW1haWwgaXMgbWlzc2luZyB0aGUgJ0AnIGNoYXJhY3RlcmA7XG4gICAgICAgICAgICByZXR1cm4geyBlcnJvcjogdHJ1ZSwgbWVzc2FnZTogbXNnIH07XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHF1b3RlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBpID0gc3RyLmxhc3RJbmRleE9mKCdAJyk7XG4gICAgICAgIGNvbnN0IGRvbSA9IHN0ci5zbGljZShpICsgMSk7XG4gICAgICAgIGNvbnN0IGRvbUFyciA9IGRvbS5zcGxpdCgnJyk7XG4gICAgICAgIGNvbnN0IGxwID0gc3RyLnNsaWNlKDAsIGkpO1xuICAgICAgICBjb25zdCBscEFyciA9IGxwLnNwbGl0KCcnKTtcbiAgICAgICAgY29uc3Qgc3BlY2lhbENoYXJzID0gYFwiXicoKSw6Ozw+QFtcXFxcXWAuc3BsaXQoJycpO1xuXG4gICAgICAgIC8vIFRvIGRldGVybWluZSB3aGV0aGVyIHRoZSBsb2NhbC1wYXJ0IG9mIGVtYWlsIGlzIHF1b3RlZCAoaW4gZG91YmxlIHF1b3RhdGlvbiBtYXJrcylcbiAgICAgICAgaWYgKGxwWzBdID09PSBgXCJgICYmIGxwW2xwLmxlbmd0aCAtIDFdID09PSBgXCJgKSB7XG4gICAgICAgICAgICBxdW90ZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxwLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIG1zZyA9IGB5b3VyIGVtYWlsIGlzIG1pc3NpbmcgdGhlIHVzZXJuYW1lIHBhcnQuIEZvcm1hdDogW3VzZXJuYW1lXUBbZG9tYWluXWA7XG4gICAgICAgICAgICByZXR1cm4geyBlcnJvcjogdHJ1ZSwgbWVzc2FnZTogbXNnIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZG9tLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIG1zZyA9IGB5b3VyIGVtYWlsIGlzIG1pc3NpbmcgdGhlIGRvbWFpbiBwYXJ0LiBGb3JtYXQ6IFt1c2VybmFtZV1AW2RvbWFpbl1gO1xuICAgICAgICAgICAgcmV0dXJuIHsgZXJyb3I6IHRydWUsIG1lc3NhZ2U6IG1zZyB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxwLmxlbmd0aCA+IDY0KSB7XG4gICAgICAgICAgICBtc2cgPSBgdGhlIHVzZXJuYW1lIHBhcnQgb2YgeW91ciBlbWFpbCBjYW5ub3QgY29udGFpbiBtb3JlIHRoYW4gNjQgY2hhcmFjdGVyc2A7XG4gICAgICAgICAgICByZXR1cm4geyBlcnJvcjogdHJ1ZSwgbWVzc2FnZTogbXNnIH07XG4gICAgICAgIH1cblxuXG5cbiAgICAgICAgaWYgKGRvbS5sZW5ndGggPiAyNTUpIHtcbiAgICAgICAgICAgIG1zZyA9IGB0aGUgZG9tYWluIHBhcnQgb2YgeW91ciBlbWFpbCBjYW5ub3QgY29udGFpbiBtb3JlIHRoYW4gMjU1IGNoYXJhY3RlcnNgO1xuICAgICAgICAgICAgcmV0dXJuIHsgZXJyb3I6IHRydWUsIG1lc3NhZ2U6IG1zZyB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbG9jYWwtcGFydCBjYW5ub3Qgc3RhcnQgb3IgZW5kIHdpdGggYSBkb3RcbiAgICAgICAgaWYgKGxwQXJyWzBdID09PSAnLicgfHwgbHBBcnJbbHBBcnIubGVuZ3RoIC0gMV0gPT09ICcuJykge1xuICAgICAgICAgICAgbXNnID0gYGEgZG90ICguKSBjYW5ub3Qgc3RhcnQgb3IgZW5kIHVzZXJuYW1lIHBhcnQgb2YgeW91ciBlbWFpbCwgdGhlIHVzZXJuYW1lIGlzIHVubGVzcyBxdW90ZWRgO1xuICAgICAgICAgICAgcmV0dXJuIHsgZXJyb3I6IHRydWUsIG1lc3NhZ2U6IG1zZyB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZW1haWwgKGxvY2FsLXBhcnQpIG5hbWUgc2hvdWxkIG5vdCBjb250YWluIGNvbnNlY3V0aXZlIGRvdHNcbiAgICAgICAgbGV0IHggPSAtMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBscC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgeCA9IGxwLmluZGV4T2YoJy4nLCB4ICsgMSk7IC8vIHN0YXJ0cyBmcm9tIGluZGV4IDAsIGFuZCBmaW5kcyB0aGUgbmV4dCBpbnN0YW5jZSBvZiAnLicgd2l0aCBldmVyeSBsb29wXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh4KTtcbiAgICAgICAgICAgIGxldCB5ID0geCArIDE7IC8vIG4gaXMgaW5kZXggb2YgdGhlIG5leHQgY2hhcmFjdGVyIGZvbGxvd2luZyB0aGUgY3VycmVudCBkb3RcbiAgICAgICAgICAgIGlmIChscFt4XSA9PT0gbHBbeV0pIHtcbiAgICAgICAgICAgICAgICBtc2cgPSBgZW1haWw6IGNvbnNlY3V0aXZlIGRvdHMgYXJlIG5vdCBhbGxvd2VkLCB1bmxlc3MgdGhlIHVzZXJuYW1lIGlzIHF1b3RlZGA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZXJyb3I6IHRydWUsIG1lc3NhZ2U6IG1zZyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2Fubm90IGNvbnRhaW4gbW9yZSB0aGFuIG9uZSBAIHdpdGhvdXQgcXVvdGVzXG4gICAgICAgIGlmICgobHAuaW5kZXhPZignQCcpID4gLTEpICYmICFxdW90ZWQpIHtcbiAgICAgICAgICAgIG1zZyA9IGBlbWFpbDogb25seSBvbmUgQCBpcyBhbGxvd2VkIG91dHNpZGUgcXVvdGF0aW9uIG1hcmtzYDtcbiAgICAgICAgICAgIHJldHVybiB7IGVycm9yOiB0cnVlLCBtZXNzYWdlOiBtc2cgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNhbm5vdCBjb250YWluIGEgc3BhY2Ugd2l0aG91dCBxdW90ZXNcbiAgICAgICAgaWYgKChscC5pbmRleE9mKCcgJykgPiAtMSkgJiYgIXF1b3RlZCkge1xuICAgICAgICAgICAgbXNnID0gYGVtYWlsIHVzZXJuYW1lIGNhbm5vdCBjb250YWluIHNwYWNlcywgdW5sZXNzIHRoZSB1c2VybmFtZSBpcyBxdW90ZWRgO1xuICAgICAgICAgICAgcmV0dXJuIHsgZXJyb3I6IHRydWUsIG1lc3NhZ2U6IG1zZyB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2Fubm90IGNvbnRhaW4gc29tZSBzcGVjaWFsIGNoYXJzIGxpa2UgXCIoKSw6Ozw+QFtcXFxcXSB3aXRob3V0IHFvdXRlc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwZWNpYWxDaGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKChscC5pbmRleE9mKHNwZWNpYWxDaGFyc1tpXSkgPiAtMSkgJiYgIXF1b3RlZCkge1xuICAgICAgICAgICAgICAgIG1zZyA9IGBlbWFpbCBjYW5ub3QgY29udGFpbiAnJHtzcGVjaWFsQ2hhcnNbaV19JyBvdXRzaWRlIHF1b3RhdGlvbiBtYXJrc2A7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZXJyb3I6IHRydWUsIG1lc3NhZ2U6IG1zZyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2hvdWxkIG5vdCBjb250YWluIGxpbmUgZm9ybWF0dGluZyBjaGFyYWN0ZXJzIGxpa2UgXFxuLlxuICAgICAgICAvLyBSZWNhbGw6IExpbmUgZm9ybWF0dGluZyBjaGFyYWN0ZXJzIGZhbGwgd2l0aGluIHRoZSByYW5nZVxuICAgICAgICAvLyBvZiBjaGFyYWN0ZXIgY29kZXMgZnJvbSAwIHRvIDMyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzI7IGkrKykge1xuICAgICAgICAgICAgaWYgKChscC5pbmRleE9mKFN0cmluZy5mcm9tQ29kZVBvaW50KGkpKSA+IC0xKSkge1xuICAgICAgICAgICAgICAgIG1zZyA9IGBlbWFpbCBjYW5ub3QgY29udGFpbiBsaW5lIGZvcm1hdHRpbmcgY2hhcmFjdGVycyBsaWtlIFxcXFxuLCBcXFxcdCwgZXRjYDtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBlcnJvcjogdHJ1ZSwgbWVzc2FnZTogbXNnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEb21haW4gbmFtZSBzaG91bGQgbm90IGNvbnRhaW4gY29uc2VjdXRpdmUgZG90c1xuICAgICAgICBsZXQgbSA9IC0xO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvbS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbSA9IGRvbS5pbmRleE9mKCcuJywgbSArIDEpOyAvLyBzdGFydHMgZnJvbSBpbmRleCAwLCBhbmQgZmluZHMgdGhlIG5leHQgaW5zdGFuY2Ugb2YgJy4nIHdpdGggZXZlcnkgbG9vcFxuICAgICAgICAgICAgbGV0IG4gPSBtICsgMTsgLy8gbiBpcyBpbmRleCBvZiB0aGUgbmV4dCBjaGFyYWN0ZXIgZm9sbG93aW5nIHRoZSBjdXJyZW50IGRvdFxuICAgICAgICAgICAgaWYgKGRvbUFyclttXSA9PT0gZG9tQXJyW25dKSB7XG4gICAgICAgICAgICAgICAgbXNnID0gYGVtYWlsOiBjb25zZWN1dGl2ZSBkb3RzIGFmdGVyIEAgaXMgbm90IGFsbG93ZWQuYDtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBlcnJvcjogdHJ1ZSwgbWVzc2FnZTogbXNnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkb21haW4gbmFtZSBjb25ub3QgY29udGFpbiBzcGFjZXNcbiAgICAgICAgaWYgKChkb20uaW5kZXhPZignICcpID4gLTEpKSB7XG4gICAgICAgICAgICBtc2cgPSBgZW1haWwgY2Fubm90IGNvbnRhaW4gc3BhY2VzIGFmdGVyIEBgO1xuICAgICAgICAgICAgcmV0dXJuIHsgZXJyb3I6IHRydWUsIG1lc3NhZ2U6IG1zZyB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIGRvbWFpbiBzaG91bGQgZW5kIHdpdGggLmNvbSwgLm9yZywgLm5ldCwgLi4uXG4gICAgICAgIGlmICghdGhpcy5kb3RDb20oc3RyKSAmJiAhdGhpcy5kb3RPcmcoc3RyKSAmJiAhdGhpcy5kb3ROZXQoc3RyKSkge1xuICAgICAgICAgICAgbXNnID0gYGVtYWlsIGRvbWFpbiBuYW1lIG11c3QgZW5kIHdpdGggJy5jb20nLCAnLm9yZycgb3IgJy5uZXQnYDtcbiAgICAgICAgICAgIHJldHVybiB7IGVycm9yOiB0cnVlLCBtZXNzYWdlOiBtc2cgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxlYWRpbmcgZGFzaCBpbiBmcm9udCBvZiBkb21haW4gaXMgaW52YWxpZFxuICAgICAgICBpZiAoZG9tWzBdID09PSAnLScpIHtcbiAgICAgICAgICAgIG1zZyA9IGBlbWFpbDogbGVhZGluZyBkYXNoIGluIGZyb250IG9mIGRvbWFpbiBpcyBub3QgYWxsb3dlZGA7XG4gICAgICAgICAgICByZXR1cm4geyBlcnJvcjogdHJ1ZSwgbWVzc2FnZTogbXNnIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlamVjdHMgc3BlY2lhbCBjaGFyYWN0ZXJzIGluIHRoZSBkb21haW4gbmFtZSBleGNlcHQgJy4nIGFuZCBub24tbGVhZGluZyBkYXNoICgtKVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvbS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWREb21DaGFyKGRvbVtpXSwgZG9tKSkge1xuICAgICAgICAgICAgICAgIG1zZyA9IGBlbWFpbDogc3BlY2lhbCBjaGFyYWN0ZXJzIGxpa2UgXCIgJHtkb21baV19IFwiIGlzIG5vdCBhbGxvd2VkIGluIHRoZSBkb21haW5gO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGVycm9yOiB0cnVlLCBtZXNzYWdlOiBtc2cgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHVybiBmYWxzZSBpZiB0aGVyZSBpcyBubyBkb3QgaW4gdGhlIGRvbWFpbiAodGhlcmUgbXVzdCBiZSBhIC4qKVxuICAgICAgICBpZiAoZG9tLmluZGV4T2YoJy4nKSA8IDApIHtcbiAgICAgICAgICAgIG1zZyA9IGB5b3VyIGVtYWlsIGhhcyBhbiBpbnZhbGlkIGRvbWFpbiBuYW1lLiBVc2UgLmNvbSwgLm9yZywgb3IgLm5ldGA7XG4gICAgICAgICAgICByZXR1cm4geyBlcnJvcjogdHJ1ZSwgbWVzc2FnZTogbXNnIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBhbiBlbWFpbCBwYXNzZXMgYWxsIHRoZSB0ZXN0cyBhYm92ZSwgdGhlbiByZXR1cm4gdGhpczpcbiAgICAgICAgcmV0dXJuIHsgZXJyb3I6IGZhbHNlLCBtZXNzYWdlOiAnZW1haWwgaXMgdmFsaWQnIH07XG5cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGVtYWlsVGVzdDsiXX0=
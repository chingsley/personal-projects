'use strict';var cov_bh9kia0b8=function(){var path="/home/enejakc/Documents/projects/ireporter-db-practice/tests/seed/seed.js",hash="0c1be4cf3d5cb83c6ea8a181f5641f68ed11b90f",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/enejakc/Documents/projects/ireporter-db-practice/tests/seed/seed.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:115}},"2":{start:{line:8,column:20},end:{line:8,column:43}},"3":{start:{line:10,column:21},end:{line:10,column:58}},"4":{start:{line:12,column:14},end:{line:12,column:47}},"5":{start:{line:14,column:15},end:{line:14,column:46}},"6":{start:{line:16,column:39},end:{line:16,column:93}},"7":{start:{line:18,column:33},end:{line:18,column:456}},"8":{start:{line:18,column:64},end:{line:18,column:89}},"9":{start:{line:18,column:91},end:{line:18,column:453}},"10":{start:{line:18,column:165},end:{line:18,column:263}},"11":{start:{line:18,column:182},end:{line:18,column:195}},"12":{start:{line:18,column:209},end:{line:18,column:219}},"13":{start:{line:18,column:239},end:{line:18,column:253}},"14":{start:{line:18,column:254},end:{line:18,column:261}},"15":{start:{line:18,column:264},end:{line:18,column:426}},"16":{start:{line:18,column:281},end:{line:18,column:296}},"17":{start:{line:18,column:306},end:{line:18,column:424}},"18":{start:{line:18,column:360},end:{line:18,column:380}},"19":{start:{line:18,column:401},end:{line:18,column:420}},"20":{start:{line:18,column:429},end:{line:18,column:449}},"21":{start:{line:20,column:14},end:{line:120,column:1}},"22":{start:{line:129,column:4},end:{line:134,column:42}},"23":{start:{line:141,column:30},end:{line:185,column:4}},"24":{start:{line:142,column:15},end:{line:180,column:6}},"25":{start:{line:143,column:36},end:{line:143,column:72}},"26":{start:{line:144,column:40},end:{line:144,column:80}},"27":{start:{line:146,column:38},end:{line:160,column:10}},"28":{start:{line:162,column:42},end:{line:174,column:10}},"29":{start:{line:176,column:8},end:{line:176,column:58}},"30":{start:{line:177,column:8},end:{line:177,column:62}},"31":{start:{line:178,column:8},end:{line:178,column:60}},"32":{start:{line:179,column:8},end:{line:179,column:64}},"33":{start:{line:182,column:4},end:{line:184,column:6}},"34":{start:{line:183,column:8},end:{line:183,column:43}},"35":{start:{line:191,column:26},end:{line:203,column:4}},"36":{start:{line:192,column:16},end:{line:198,column:6}},"37":{start:{line:193,column:24},end:{line:196,column:83}},"38":{start:{line:197,column:8},end:{line:197,column:46}},"39":{start:{line:200,column:4},end:{line:202,column:6}},"40":{start:{line:201,column:8},end:{line:201,column:44}},"41":{start:{line:205,column:0},end:{line:205,column:22}},"42":{start:{line:206,column:0},end:{line:206,column:54}},"43":{start:{line:207,column:0},end:{line:207,column:46}},"44":{start:{line:208,column:0},end:{line:208,column:48}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:16,column:9},end:{line:16,column:31}},loc:{start:{line:16,column:37},end:{line:16,column:95}},line:16},"1":{name:"_asyncToGenerator",decl:{start:{line:18,column:9},end:{line:18,column:26}},loc:{start:{line:18,column:31},end:{line:18,column:458}},line:18},"2":{name:"(anonymous_2)",decl:{start:{line:18,column:40},end:{line:18,column:41}},loc:{start:{line:18,column:52},end:{line:18,column:455}},line:18},"3":{name:"(anonymous_3)",decl:{start:{line:18,column:110},end:{line:18,column:111}},loc:{start:{line:18,column:137},end:{line:18,column:451}},line:18},"4":{name:"step",decl:{start:{line:18,column:148},end:{line:18,column:152}},loc:{start:{line:18,column:163},end:{line:18,column:428}},line:18},"5":{name:"(anonymous_5)",decl:{start:{line:18,column:341},end:{line:18,column:342}},loc:{start:{line:18,column:358},end:{line:18,column:382}},line:18},"6":{name:"(anonymous_6)",decl:{start:{line:18,column:384},end:{line:18,column:385}},loc:{start:{line:18,column:399},end:{line:18,column:422}},line:18},"7":{name:"generateValidToken",decl:{start:{line:128,column:9},end:{line:128,column:27}},loc:{start:{line:128,column:40},end:{line:135,column:1}},line:128},"8":{name:"(anonymous_8)",decl:{start:{line:141,column:31},end:{line:141,column:32}},loc:{start:{line:141,column:37},end:{line:185,column:1}},line:141},"9":{name:"(anonymous_9)",decl:{start:{line:142,column:33},end:{line:142,column:34}},loc:{start:{line:142,column:46},end:{line:180,column:5}},line:142},"10":{name:"dropAndRecreateTables",decl:{start:{line:182,column:20},end:{line:182,column:41}},loc:{start:{line:182,column:44},end:{line:184,column:5}},line:182},"11":{name:"(anonymous_11)",decl:{start:{line:191,column:27},end:{line:191,column:28}},loc:{start:{line:191,column:33},end:{line:203,column:1}},line:191},"12":{name:"(anonymous_12)",decl:{start:{line:192,column:34},end:{line:192,column:35}},loc:{start:{line:192,column:47},end:{line:198,column:5}},line:192},"13":{name:"populateIncidents",decl:{start:{line:200,column:20},end:{line:200,column:37}},loc:{start:{line:200,column:40},end:{line:202,column:5}},line:200}},branchMap:{"0":{loc:{start:{line:16,column:46},end:{line:16,column:92}},type:"cond-expr",locations:[{start:{line:16,column:70},end:{line:16,column:73}},{start:{line:16,column:76},end:{line:16,column:92}}],line:16},"1":{loc:{start:{line:16,column:46},end:{line:16,column:67}},type:"binary-expr",locations:[{start:{line:16,column:46},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:67}}],line:16},"2":{loc:{start:{line:18,column:264},end:{line:18,column:426}},type:"if",locations:[{start:{line:18,column:264},end:{line:18,column:426}},{start:{line:18,column:264},end:{line:18,column:426}}],line:18},"3":{loc:{start:{line:133,column:20},end:{line:133,column:94}},type:"cond-expr",locations:[{start:{line:133,column:74},end:{line:133,column:81}},{start:{line:133,column:84},end:{line:133,column:94}}],line:133}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_bh9kia0b8.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_bh9kia0b8.s[1]++;exports.generateValidToken=exports.populateIncidents=exports.dropAndRecreateTables=exports.users=undefined;var _jsonwebtoken=(cov_bh9kia0b8.s[2]++,require('jsonwebtoken'));var _jsonwebtoken2=(cov_bh9kia0b8.s[3]++,_interopRequireDefault(_jsonwebtoken));var _config=(cov_bh9kia0b8.s[4]++,require('../../server/db/config'));var _config2=(cov_bh9kia0b8.s[5]++,_interopRequireDefault(_config));function _interopRequireDefault(obj){cov_bh9kia0b8.f[0]++;cov_bh9kia0b8.s[6]++;return(cov_bh9kia0b8.b[1][0]++,obj)&&(cov_bh9kia0b8.b[1][1]++,obj.__esModule)?(cov_bh9kia0b8.b[0][0]++,obj):(cov_bh9kia0b8.b[0][1]++,{default:obj});}function _asyncToGenerator(fn){cov_bh9kia0b8.f[1]++;cov_bh9kia0b8.s[7]++;return function(){cov_bh9kia0b8.f[2]++;var gen=(cov_bh9kia0b8.s[8]++,fn.apply(this,arguments));cov_bh9kia0b8.s[9]++;return new Promise(function(resolve,reject){cov_bh9kia0b8.f[3]++;function step(key,arg){cov_bh9kia0b8.f[4]++;cov_bh9kia0b8.s[10]++;try{var info=(cov_bh9kia0b8.s[11]++,gen[key](arg));var value=(cov_bh9kia0b8.s[12]++,info.value);}catch(error){cov_bh9kia0b8.s[13]++;reject(error);cov_bh9kia0b8.s[14]++;return;}cov_bh9kia0b8.s[15]++;if(info.done){cov_bh9kia0b8.b[2][0]++;cov_bh9kia0b8.s[16]++;resolve(value);}else{cov_bh9kia0b8.b[2][1]++;cov_bh9kia0b8.s[17]++;return Promise.resolve(value).then(function(value){cov_bh9kia0b8.f[5]++;cov_bh9kia0b8.s[18]++;step("next",value);},function(err){cov_bh9kia0b8.f[6]++;cov_bh9kia0b8.s[19]++;step("throw",err);});}}cov_bh9kia0b8.s[20]++;return step("next");});};}const users=(cov_bh9kia0b8.s[21]++,{admin:{id:1,firstname:'kingsley',lastname:'eneja',phoneNumber:'09063550695',email:'eneja.kc@gmail.com',password:'kingsley',confirmPassword:'kingsley',adminSecret:'nimdamai'},validUserOne:{id:2,firstname:'john',lastname:'snow',phoneNumber:'08023875011',email:'johnsnow@gmail.com',password:'john',confirmPassword:'john',adminSecret:''},validUserTwo:{id:3,firstname:'theon',lastname:'greyjoy',phoneNumber:'0808822928',email:'theongreyjoy@gmail.com',password:'theon',confirmPassword:'theon',adminSecret:''},validUserInvalidPass:{email:'johnsnow@gmail.com',password:'wrongpassword'},invalidUser:{firstname:'four-O-four',// email: 'no@email.address',
email:'aturoVidal@gmail.com',password:'invalid'},invalidUserNoData:{},invalidUserNoFirstname:{lastname:'greyjoy',phoneNumber:'0808822928',email:'theongreyjoy@gmail.com',password:'theon',confirmPassword:'theon'},invalidUserNoEmail:{firstname:'theon',lastname:'greyjoy',phoneNumber:'0808822928',password:'theon',confirmPassword:'theon',adminSecret:''},invalidUserNoPass:{firstname:'theon',lastname:'greyjoy',phoneNumber:'0808822928',email:'theongreyjoy@gmail.com',adminSecret:''},invalidUserMissmatchedPassword:{firstname:'theon',lastname:'greyjoy',phoneNumber:'0808822928',email:'theongreyjoy@gmail.com',password:'theon',confirmPassword:'nottheon',adminSecret:''},incorrectFirstname:{firstname:'t',// firstname less than 2 characters
lastname:'greyjoy',phoneNumber:'0808822928',email:'theongreyjoy@gmail.com',password:'theon',confirmPassword:'theon',adminSecret:''},incorrectLastname:{firstname:'theon',lastname:'g',// lastname less than 2 characters
phoneNumber:'0808822928',email:'theongreyjoy@gmail.com',password:'theon',confirmPassword:'theon',adminSecret:''},incorrectEmail:{firstname:'theon',lastname:'greyjoy',phoneNumber:'0808822928',email:'kc@-gmail.com ',// email: leading dash in front of domain is not allowed
password:'theon',confirmPassword:'theon',adminSecret:''}});/**
 * @function generateValidToken - generates a valid JWT based on the user details object passed in
 * @param {Object} userObject - the details of the user
 * @returns {String} - a valid, signed, JSON Web Token
 *
 */function generateValidToken(userObject){cov_bh9kia0b8.f[7]++;cov_bh9kia0b8.s[22]++;return _jsonwebtoken2.default.sign({userId:userObject.id,userName:userObject.firstname,userEmail:userObject.email,userStatus:userObject.adminSecret===process.env.ADMIN_SECRET?(cov_bh9kia0b8.b[3][0]++,'admin'):(cov_bh9kia0b8.b[3][1]++,'customer')},process.env.JWT_SECRET).toString();}/**
 * @async
 * @function dropAndRecreateTables - purges the database data
 */const dropAndRecreateTables=(cov_bh9kia0b8.s[23]++,(()=>{cov_bh9kia0b8.f[8]++;var _ref=(cov_bh9kia0b8.s[24]++,_asyncToGenerator(function*(){cov_bh9kia0b8.f[9]++;const dropUsersTableQuery=(cov_bh9kia0b8.s[25]++,'DROP TABLE IF EXISTS users CASCADE');const dropIncidentsTableQuery=(cov_bh9kia0b8.s[26]++,'DROP TABLE IF EXISTS incidents CASCADE');const createUsersTableQuery=(cov_bh9kia0b8.s[27]++,`CREATE TABLE IF NOT EXISTS
        users(
            id serial PRIMARY KEY,
            firstname VARCHAR(50) NOT NULL,
            lastname VARCHAR(50) NOT NULL,
            othernames VARCHAR(50) DEFAULT NULL,
            username VARCHAR(50) NOT NULL,
            phonenumber VARCHAR(50) NOT NULL,
            email VARCHAR(128) UNIQUE NOT NULL,
            password VARCHAR(128) NOT NULL,
            picture TEXT DEFAULT NULL,
            registered TIMESTAMP,
            is_admin BOOLEAN NOT NULL

        )`);const createIncidentsTableQuery=(cov_bh9kia0b8.s[28]++,`CREATE TABLE IF NOT EXISTS
        incidents(
            id serial PRIMARY KEY,
            created_on TIMESTAMP,
            created_by serial NOT NULL,
            type TEXT NOT NULL,
            location TEXT NOT NULL,
            status VARCHAR(50) NOT NULL DEFAULT 'draft',
            images TEXT DEFAULT NULL,
            videos TEXT DEFAULT NULL,
            comment TEXT NOT NULL,
            FOREIGN KEY (created_by) REFERENCES users (id) ON DELETE CASCADE
        )`);cov_bh9kia0b8.s[29]++;yield _config2.default.query(dropUsersTableQuery);cov_bh9kia0b8.s[30]++;yield _config2.default.query(dropIncidentsTableQuery);cov_bh9kia0b8.s[31]++;yield _config2.default.query(createUsersTableQuery);cov_bh9kia0b8.s[32]++;yield _config2.default.query(createIncidentsTableQuery);}));cov_bh9kia0b8.s[33]++;return function dropAndRecreateTables(){cov_bh9kia0b8.f[10]++;cov_bh9kia0b8.s[34]++;return _ref.apply(this,arguments);};})());/**
 * @async
 * @function populateMenu - adds two food items to the database
 */const populateIncidents=(cov_bh9kia0b8.s[35]++,(()=>{cov_bh9kia0b8.f[11]++;var _ref2=(cov_bh9kia0b8.s[36]++,_asyncToGenerator(function*(){cov_bh9kia0b8.f[12]++;const dbQuery=(cov_bh9kia0b8.s[37]++,`INSERT INTO incidents(created_by, type, location, status, comment)
    VALUES
    (1, 'red-flag', '2.989887, 9.7979799', 'draft', 'just testing the system'),
    (2, 'intervention', '2.55566, 6.55654', 'draft', 'another testing performed');`);cov_bh9kia0b8.s[38]++;yield _config2.default.query(dbQuery);}));cov_bh9kia0b8.s[39]++;return function populateIncidents(){cov_bh9kia0b8.f[13]++;cov_bh9kia0b8.s[40]++;return _ref2.apply(this,arguments);};})());cov_bh9kia0b8.s[41]++;exports.users=users;cov_bh9kia0b8.s[42]++;exports.dropAndRecreateTables=dropAndRecreateTables;cov_bh9kia0b8.s[43]++;exports.populateIncidents=populateIncidents;cov_bh9kia0b8.s[44]++;exports.generateValidToken=generateValidToken;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlZWQuanMiXSwibmFtZXMiOlsidXNlcnMiLCJhZG1pbiIsImlkIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJwaG9uZU51bWJlciIsImVtYWlsIiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJhZG1pblNlY3JldCIsInZhbGlkVXNlck9uZSIsInZhbGlkVXNlclR3byIsInZhbGlkVXNlckludmFsaWRQYXNzIiwiaW52YWxpZFVzZXIiLCJpbnZhbGlkVXNlck5vRGF0YSIsImludmFsaWRVc2VyTm9GaXJzdG5hbWUiLCJpbnZhbGlkVXNlck5vRW1haWwiLCJpbnZhbGlkVXNlck5vUGFzcyIsImludmFsaWRVc2VyTWlzc21hdGNoZWRQYXNzd29yZCIsImluY29ycmVjdEZpcnN0bmFtZSIsImluY29ycmVjdExhc3RuYW1lIiwiaW5jb3JyZWN0RW1haWwiLCJnZW5lcmF0ZVZhbGlkVG9rZW4iLCJ1c2VyT2JqZWN0Iiwiand0Iiwic2lnbiIsInVzZXJJZCIsInVzZXJOYW1lIiwidXNlckVtYWlsIiwidXNlclN0YXR1cyIsInByb2Nlc3MiLCJlbnYiLCJBRE1JTl9TRUNSRVQiLCJKV1RfU0VDUkVUIiwidG9TdHJpbmciLCJkcm9wQW5kUmVjcmVhdGVUYWJsZXMiLCJkcm9wVXNlcnNUYWJsZVF1ZXJ5IiwiZHJvcEluY2lkZW50c1RhYmxlUXVlcnkiLCJjcmVhdGVVc2Vyc1RhYmxlUXVlcnkiLCJjcmVhdGVJbmNpZGVudHNUYWJsZVF1ZXJ5IiwicG9vbCIsInF1ZXJ5IiwicG9wdWxhdGVJbmNpZGVudHMiLCJkYlF1ZXJ5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFDQTs7Ozs7Ozs7QUFFQSxNQUFNQSxRQUFRO0FBQ1ZDLFdBQU87QUFDSEMsWUFBSSxDQUREO0FBRUhDLG1CQUFXLFVBRlI7QUFHSEMsa0JBQVUsT0FIUDtBQUlIQyxxQkFBYSxhQUpWO0FBS0hDLGVBQU8sb0JBTEo7QUFNSEMsa0JBQVUsVUFOUDtBQU9IQyx5QkFBaUIsVUFQZDtB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Q0FBaEM7O0FBRUEsY0FBTUMsd0JBQXlCOzs7Ozs7Ozs7Ozs7OztVQUEvQjs7QUFnQkEsY0FBTUMsNEJBQTZCOzs7Ozs7Ozs7Ozs7VUFBbkM7O0FBY0EsY0FBTUMsaUJBQUtDLEtBQUwsQ0FBV0wsbUJBQVgsQ0FBTjtBQUNBLGNBQU1JLGlCQUFLQyxLQUFMLENBQVdKLHVCQUFYLENBQU47QUFDQSxjQUFNRyxpQkFBS0MsS0FBTCxDQUFXSCxxQkFBWCxDQUFOO0FBQ0EsY0FBTUUsaUJBQUtDLEtBQUwsQ0FBV0YseUJBQVgsQ0FBTjtBQUNILEtBdENLOztBQUFBO0FBQUE7QUFBQTtBQUFBLElBQU47O0FBd0NBOzs7O0FBSUEsTUFBTUc7QUFBQSxrQ0FBb0IsYUFBWTtBQUNsQyxjQUFNQyxVQUFXOzs7bUZBQWpCO0FBSUEsY0FBTUgsaUJBQUtDLEtBQUwsQ0FBV0UsT0FBWCxDQUFOO0FBQ0gsS0FOSzs7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFOOztRQVNJM0MsSyxHQUFBQSxLO1FBQ0FtQyxxQixHQUFBQSxxQjtRQUNBTyxpQixHQUFBQSxpQjtRQUNBcEIsa0IsR0FBQUEsa0IiLCJmaWxlIjoic2VlZC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9lbmVqYWtjL0RvY3VtZW50cy9wcm9qZWN0cy9pcmVwb3J0ZXItZGItcHJhY3RpY2UvdGVzdHMvc2VlZCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBwb29sIGZyb20gJy4uLy4uL3NlcnZlci9kYi9jb25maWcnO1xuXG5jb25zdCB1c2VycyA9IHtcbiAgICBhZG1pbjoge1xuICAgICAgICBpZDogMSxcbiAgICAgICAgZmlyc3RuYW1lOiAna2luZ3NsZXknLFxuICAgICAgICBsYXN0bmFtZTogJ2VuZWphJyxcbiAgICAgICAgcGhvbmVOdW1iZXI6ICcwOTA2MzU1MDY5NScsXG4gICAgICAgIGVtYWlsOiAnZW5lamEua2NAZ21haWwuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICdraW5nc2xleScsXG4gICAgICAgIGNvbmZpcm1QYXNzd29yZDogJ2tpbmdzbGV5JyxcbiAgICAgICAgYWRtaW5TZWNyZXQ6ICduaW1kYW1haScsXG4gICAgfSxcbiAgICB2YWxpZFVzZXJPbmU6IHtcbiAgICAgICAgaWQ6IDIsXG4gICAgICAgIGZpcnN0bmFtZTogJ2pvaG4nLFxuICAgICAgICBsYXN0bmFtZTogJ3Nub3cnLFxuICAgICAgICBwaG9uZU51bWJlcjogJzA4MDIzODc1MDExJyxcbiAgICAgICAgZW1haWw6ICdqb2huc25vd0BnbWFpbC5jb20nLFxuICAgICAgICBwYXNzd29yZDogJ2pvaG4nLFxuICAgICAgICBjb25maXJtUGFzc3dvcmQ6ICdqb2huJyxcbiAgICAgICAgYWRtaW5TZWNyZXQ6ICcnLFxuICAgIH0sXG4gICAgdmFsaWRVc2VyVHdvOiB7XG4gICAgICAgIGlkOiAzLFxuICAgICAgICBmaXJzdG5hbWU6ICd0aGVvbicsXG4gICAgICAgIGxhc3RuYW1lOiAnZ3JleWpveScsXG4gICAgICAgIHBob25lTnVtYmVyOiAnMDgwODgyMjkyOCcsXG4gICAgICAgIGVtYWlsOiAndGhlb25ncmV5am95QGdtYWlsLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAndGhlb24nLFxuICAgICAgICBjb25maXJtUGFzc3dvcmQ6ICd0aGVvbicsXG4gICAgICAgIGFkbWluU2VjcmV0OiAnJyxcbiAgICB9LFxuICAgIHZhbGlkVXNlckludmFsaWRQYXNzOiB7XG4gICAgICAgIGVtYWlsOiAnam9obnNub3dAZ21haWwuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICd3cm9uZ3Bhc3N3b3JkJyxcbiAgICB9LFxuICAgIGludmFsaWRVc2VyOiB7XG4gICAgICAgIGZpcnN0bmFtZTogJ2ZvdXItTy1mb3VyJyxcbiAgICAgICAgLy8gZW1haWw6ICdub0BlbWFpbC5hZGRyZXNzJyxcbiAgICAgICAgZW1haWw6ICdhdHVyb1ZpZGFsQGdtYWlsLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAnaW52YWxpZCcsXG4gICAgfSxcbiAgICBpbnZhbGlkVXNlck5vRGF0YToge30sXG4gICAgaW52YWxpZFVzZXJOb0ZpcnN0bmFtZToge1xuICAgICAgICBsYXN0bmFtZTogJ2dyZXlqb3knLFxuICAgICAgICBwaG9uZU51bWJlcjogJzA4MDg4MjI5MjgnLFxuICAgICAgICBlbWFpbDogJ3RoZW9uZ3JleWpveUBnbWFpbC5jb20nLFxuICAgICAgICBwYXNzd29yZDogJ3RoZW9uJyxcbiAgICAgICAgY29uZmlybVBhc3N3b3JkOiAndGhlb24nLFxuICAgIH0sXG4gICAgaW52YWxpZFVzZXJOb0VtYWlsOiB7XG4gICAgICAgIGZpcnN0bmFtZTogJ3RoZW9uJyxcbiAgICAgICAgbGFzdG5hbWU6ICdncmV5am95JyxcbiAgICAgICAgcGhvbmVOdW1iZXI6ICcwODA4ODIyOTI4JyxcbiAgICAgICAgcGFzc3dvcmQ6ICd0aGVvbicsXG4gICAgICAgIGNvbmZpcm1QYXNzd29yZDogJ3RoZW9uJyxcbiAgICAgICAgYWRtaW5TZWNyZXQ6ICcnLFxuICAgIH0sXG4gICAgaW52YWxpZFVzZXJOb1Bhc3M6IHtcbiAgICAgICAgZmlyc3RuYW1lOiAndGhlb24nLFxuICAgICAgICBsYXN0bmFtZTogJ2dyZXlqb3knLFxuICAgICAgICBwaG9uZU51bWJlcjogJzA4MDg4MjI5MjgnLFxuICAgICAgICBlbWFpbDogJ3RoZW9uZ3JleWpveUBnbWFpbC5jb20nLFxuICAgICAgICBhZG1pblNlY3JldDogJycsXG4gICAgfSxcbiAgICBpbnZhbGlkVXNlck1pc3NtYXRjaGVkUGFzc3dvcmQ6IHtcbiAgICAgICAgZmlyc3RuYW1lOiAndGhlb24nLFxuICAgICAgICBsYXN0bmFtZTogJ2dyZXlqb3knLFxuICAgICAgICBwaG9uZU51bWJlcjogJzA4MDg4MjI5MjgnLFxuICAgICAgICBlbWFpbDogJ3RoZW9uZ3JleWpveUBnbWFpbC5jb20nLFxuICAgICAgICBwYXNzd29yZDogJ3RoZW9uJyxcbiAgICAgICAgY29uZmlybVBhc3N3b3JkOiAnbm90dGhlb24nLFxuICAgICAgICBhZG1pblNlY3JldDogJycsXG4gICAgfSxcbiAgICBpbmNvcnJlY3RGaXJzdG5hbWU6IHtcbiAgICAgICAgZmlyc3RuYW1lOiAndCcsIC8vIGZpcnN0bmFtZSBsZXNzIHRoYW4gMiBjaGFyYWN0ZXJzXG4gICAgICAgIGxhc3RuYW1lOiAnZ3JleWpveScsXG4gICAgICAgIHBob25lTnVtYmVyOiAnMDgwODgyMjkyOCcsXG4gICAgICAgIGVtYWlsOiAndGhlb25ncmV5am95QGdtYWlsLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAndGhlb24nLFxuICAgICAgICBjb25maXJtUGFzc3dvcmQ6ICd0aGVvbicsXG4gICAgICAgIGFkbWluU2VjcmV0OiAnJ1xuICAgIH0sXG4gICAgaW5jb3JyZWN0TGFzdG5hbWU6IHtcbiAgICAgICAgZmlyc3RuYW1lOiAndGhlb24nLCBcbiAgICAgICAgbGFzdG5hbWU6ICdnJywgLy8gbGFzdG5hbWUgbGVzcyB0aGFuIDIgY2hhcmFjdGVyc1xuICAgICAgICBwaG9uZU51bWJlcjogJzA4MDg4MjI5MjgnLFxuICAgICAgICBlbWFpbDogJ3RoZW9uZ3JleWpveUBnbWFpbC5jb20nLFxuICAgICAgICBwYXNzd29yZDogJ3RoZW9uJyxcbiAgICAgICAgY29uZmlybVBhc3N3b3JkOiAndGhlb24nLFxuICAgICAgICBhZG1pblNlY3JldDogJydcbiAgICB9LFxuICAgIGluY29ycmVjdEVtYWlsOiB7XG4gICAgICAgIGZpcnN0bmFtZTogJ3RoZW9uJywgXG4gICAgICAgIGxhc3RuYW1lOiAnZ3JleWpveScsXG4gICAgICAgIHBob25lTnVtYmVyOiAnMDgwODgyMjkyOCcsXG4gICAgICAgIGVtYWlsOiAna2NALWdtYWlsLmNvbSAnLCAvLyBlbWFpbDogbGVhZGluZyBkYXNoIGluIGZyb250IG9mIGRvbWFpbiBpcyBub3QgYWxsb3dlZFxuICAgICAgICBwYXNzd29yZDogJ3RoZW9uJyxcbiAgICAgICAgY29uZmlybVBhc3N3b3JkOiAndGhlb24nLFxuICAgICAgICBhZG1pblNlY3JldDogJydcbiAgICB9XG59O1xuXG4vKipcbiAqIEBmdW5jdGlvbiBnZW5lcmF0ZVZhbGlkVG9rZW4gLSBnZW5lcmF0ZXMgYSB2YWxpZCBKV1QgYmFzZWQgb24gdGhlIHVzZXIgZGV0YWlscyBvYmplY3QgcGFzc2VkIGluXG4gKiBAcGFyYW0ge09iamVjdH0gdXNlck9iamVjdCAtIHRoZSBkZXRhaWxzIG9mIHRoZSB1c2VyXG4gKiBAcmV0dXJucyB7U3RyaW5nfSAtIGEgdmFsaWQsIHNpZ25lZCwgSlNPTiBXZWIgVG9rZW5cbiAqXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlVmFsaWRUb2tlbih1c2VyT2JqZWN0KSB7XG4gICAgcmV0dXJuIGp3dC5zaWduKHtcbiAgICAgICAgdXNlcklkOiB1c2VyT2JqZWN0LmlkLFxuICAgICAgICB1c2VyTmFtZTogdXNlck9iamVjdC5maXJzdG5hbWUsXG4gICAgICAgIHVzZXJFbWFpbDogdXNlck9iamVjdC5lbWFpbCxcbiAgICAgICAgdXNlclN0YXR1czogdXNlck9iamVjdC5hZG1pblNlY3JldCA9PT0gcHJvY2Vzcy5lbnYuQURNSU5fU0VDUkVUID8gJ2FkbWluJyA6ICdjdXN0b21lcicsXG4gICAgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCkudG9TdHJpbmcoKTtcbn1cblxuLyoqXG4gKiBAYXN5bmNcbiAqIEBmdW5jdGlvbiBkcm9wQW5kUmVjcmVhdGVUYWJsZXMgLSBwdXJnZXMgdGhlIGRhdGFiYXNlIGRhdGFcbiAqL1xuY29uc3QgZHJvcEFuZFJlY3JlYXRlVGFibGVzID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGRyb3BVc2Vyc1RhYmxlUXVlcnkgPSAnRFJPUCBUQUJMRSBJRiBFWElTVFMgdXNlcnMgQ0FTQ0FERSc7XG4gICAgY29uc3QgZHJvcEluY2lkZW50c1RhYmxlUXVlcnkgPSAnRFJPUCBUQUJMRSBJRiBFWElTVFMgaW5jaWRlbnRzIENBU0NBREUnO1xuXG4gICAgY29uc3QgY3JlYXRlVXNlcnNUYWJsZVF1ZXJ5ID0gYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTXG4gICAgICAgIHVzZXJzKFxuICAgICAgICAgICAgaWQgc2VyaWFsIFBSSU1BUlkgS0VZLFxuICAgICAgICAgICAgZmlyc3RuYW1lIFZBUkNIQVIoNTApIE5PVCBOVUxMLFxuICAgICAgICAgICAgbGFzdG5hbWUgVkFSQ0hBUig1MCkgTk9UIE5VTEwsXG4gICAgICAgICAgICBvdGhlcm5hbWVzIFZBUkNIQVIoNTApIERFRkFVTFQgTlVMTCxcbiAgICAgICAgICAgIHVzZXJuYW1lIFZBUkNIQVIoNTApIE5PVCBOVUxMLFxuICAgICAgICAgICAgcGhvbmVudW1iZXIgVkFSQ0hBUig1MCkgTk9UIE5VTEwsXG4gICAgICAgICAgICBlbWFpbCBWQVJDSEFSKDEyOCkgVU5JUVVFIE5PVCBOVUxMLFxuICAgICAgICAgICAgcGFzc3dvcmQgVkFSQ0hBUigxMjgpIE5PVCBOVUxMLFxuICAgICAgICAgICAgcGljdHVyZSBURVhUIERFRkFVTFQgTlVMTCxcbiAgICAgICAgICAgIHJlZ2lzdGVyZWQgVElNRVNUQU1QLFxuICAgICAgICAgICAgaXNfYWRtaW4gQk9PTEVBTiBOT1QgTlVMTFxuXG4gICAgICAgIClgO1xuXG4gICAgY29uc3QgY3JlYXRlSW5jaWRlbnRzVGFibGVRdWVyeSA9IGBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUU1xuICAgICAgICBpbmNpZGVudHMoXG4gICAgICAgICAgICBpZCBzZXJpYWwgUFJJTUFSWSBLRVksXG4gICAgICAgICAgICBjcmVhdGVkX29uIFRJTUVTVEFNUCxcbiAgICAgICAgICAgIGNyZWF0ZWRfYnkgc2VyaWFsIE5PVCBOVUxMLFxuICAgICAgICAgICAgdHlwZSBURVhUIE5PVCBOVUxMLFxuICAgICAgICAgICAgbG9jYXRpb24gVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgICAgIHN0YXR1cyBWQVJDSEFSKDUwKSBOT1QgTlVMTCBERUZBVUxUICdkcmFmdCcsXG4gICAgICAgICAgICBpbWFnZXMgVEVYVCBERUZBVUxUIE5VTEwsXG4gICAgICAgICAgICB2aWRlb3MgVEVYVCBERUZBVUxUIE5VTEwsXG4gICAgICAgICAgICBjb21tZW50IFRFWFQgTk9UIE5VTEwsXG4gICAgICAgICAgICBGT1JFSUdOIEtFWSAoY3JlYXRlZF9ieSkgUkVGRVJFTkNFUyB1c2VycyAoaWQpIE9OIERFTEVURSBDQVNDQURFXG4gICAgICAgIClgO1xuXG4gICAgYXdhaXQgcG9vbC5xdWVyeShkcm9wVXNlcnNUYWJsZVF1ZXJ5KTtcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KGRyb3BJbmNpZGVudHNUYWJsZVF1ZXJ5KTtcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KGNyZWF0ZVVzZXJzVGFibGVRdWVyeSk7XG4gICAgYXdhaXQgcG9vbC5xdWVyeShjcmVhdGVJbmNpZGVudHNUYWJsZVF1ZXJ5KTtcbn07XG5cbi8qKlxuICogQGFzeW5jXG4gKiBAZnVuY3Rpb24gcG9wdWxhdGVNZW51IC0gYWRkcyB0d28gZm9vZCBpdGVtcyB0byB0aGUgZGF0YWJhc2VcbiAqL1xuY29uc3QgcG9wdWxhdGVJbmNpZGVudHMgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZGJRdWVyeSA9IGBJTlNFUlQgSU5UTyBpbmNpZGVudHMoY3JlYXRlZF9ieSwgdHlwZSwgbG9jYXRpb24sIHN0YXR1cywgY29tbWVudClcbiAgICBWQUxVRVNcbiAgICAoMSwgJ3JlZC1mbGFnJywgJzIuOTg5ODg3LCA5Ljc5Nzk3OTknLCAnZHJhZnQnLCAnanVzdCB0ZXN0aW5nIHRoZSBzeXN0ZW0nKSxcbiAgICAoMiwgJ2ludGVydmVudGlvbicsICcyLjU1NTY2LCA2LjU1NjU0JywgJ2RyYWZ0JywgJ2Fub3RoZXIgdGVzdGluZyBwZXJmb3JtZWQnKTtgOyBcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KGRiUXVlcnkpO1xufTtcblxuZXhwb3J0IHtcbiAgICB1c2VycyxcbiAgICBkcm9wQW5kUmVjcmVhdGVUYWJsZXMsXG4gICAgcG9wdWxhdGVJbmNpZGVudHMsXG4gICAgZ2VuZXJhdGVWYWxpZFRva2VuLFxufTtcbiJdfQ==
'use strict';var cov_2pkuyvwq48=function(){var path="/home/enejakc/Documents/projects/ireporter-db-practice/server/middleware/inspector.js",hash="f0209d3c6635942b82cfe0a97fbd7fb0901d26cb",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/enejakc/Documents/projects/ireporter-db-practice/server/middleware/inspector.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:17},end:{line:7,column:51}},"2":{start:{line:9,column:18},end:{line:9,column:52}},"3":{start:{line:11,column:39},end:{line:11,column:93}},"4":{start:{line:18,column:28},end:{line:18,column:92}},"5":{start:{line:18,column:39},end:{line:18,column:92}},"6":{start:{line:19,column:131},end:{line:19,column:139}},"7":{start:{line:21,column:31},end:{line:21,column:99}},"8":{start:{line:22,column:30},end:{line:32,column:53}},"9":{start:{line:23,column:25},end:{line:30,column:13}},"10":{start:{line:31,column:12},end:{line:31,column:76}},"11":{start:{line:32,column:27},end:{line:32,column:41}},"12":{start:{line:34,column:8},end:{line:36,column:9}},"13":{start:{line:35,column:12},end:{line:35,column:98}},"14":{start:{line:38,column:25},end:{line:38,column:86}},"15":{start:{line:38,column:36},end:{line:38,column:86}},"16":{start:{line:40,column:8},end:{line:40,column:84}},"17":{start:{line:40,column:52},end:{line:40,column:84}},"18":{start:{line:41,column:8},end:{line:41,column:114}},"19":{start:{line:41,column:54},end:{line:41,column:114}},"20":{start:{line:42,column:8},end:{line:42,column:131}},"21":{start:{line:42,column:81},end:{line:42,column:131}},"22":{start:{line:43,column:8},end:{line:43,column:96}},"23":{start:{line:43,column:60},end:{line:43,column:96}},"24":{start:{line:45,column:8},end:{line:45,column:31}},"25":{start:{line:46,column:8},end:{line:46,column:33}},"26":{start:{line:47,column:8},end:{line:47,column:39}},"27":{start:{line:48,column:8},end:{line:48,column:38}},"28":{start:{line:49,column:8},end:{line:49,column:22}},"29":{start:{line:54,column:0},end:{line:54,column:26}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:11,column:9},end:{line:11,column:31}},loc:{start:{line:11,column:37},end:{line:11,column:95}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:4},end:{line:17,column:5}},loc:{start:{line:17,column:34},end:{line:50,column:5}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:18,column:28},end:{line:18,column:29}},loc:{start:{line:18,column:39},end:{line:18,column:92}},line:18},"3":{name:"(anonymous_3)",decl:{start:{line:22,column:49},end:{line:22,column:50}},loc:{start:{line:22,column:67},end:{line:32,column:9}},line:22},"4":{name:"(anonymous_4)",decl:{start:{line:32,column:18},end:{line:32,column:19}},loc:{start:{line:32,column:27},end:{line:32,column:41}},line:32},"5":{name:"(anonymous_5)",decl:{start:{line:38,column:25},end:{line:38,column:26}},loc:{start:{line:38,column:36},end:{line:38,column:86}},line:38}},branchMap:{"0":{loc:{start:{line:11,column:46},end:{line:11,column:92}},type:"cond-expr",locations:[{start:{line:11,column:70},end:{line:11,column:73}},{start:{line:11,column:76},end:{line:11,column:92}}],line:11},"1":{loc:{start:{line:11,column:46},end:{line:11,column:67}},type:"binary-expr",locations:[{start:{line:11,column:46},end:{line:11,column:49}},{start:{line:11,column:53},end:{line:11,column:67}}],line:11},"2":{loc:{start:{line:31,column:19},end:{line:31,column:75}},type:"cond-expr",locations:[{start:{line:31,column:57},end:{line:31,column:68}},{start:{line:31,column:71},end:{line:31,column:75}}],line:31},"3":{loc:{start:{line:31,column:19},end:{line:31,column:54}},type:"binary-expr",locations:[{start:{line:31,column:19},end:{line:31,column:38}},{start:{line:31,column:42},end:{line:31,column:54}}],line:31},"4":{loc:{start:{line:34,column:8},end:{line:36,column:9}},type:"if",locations:[{start:{line:34,column:8},end:{line:36,column:9}},{start:{line:34,column:8},end:{line:36,column:9}}],line:34},"5":{loc:{start:{line:34,column:12},end:{line:34,column:94}},type:"binary-expr",locations:[{start:{line:34,column:12},end:{line:34,column:22}},{start:{line:34,column:26},end:{line:34,column:35}},{start:{line:34,column:39},end:{line:34,column:51}},{start:{line:34,column:55},end:{line:34,column:61}},{start:{line:34,column:65},end:{line:34,column:74}},{start:{line:34,column:78},end:{line:34,column:94}}],line:34},"6":{loc:{start:{line:40,column:8},end:{line:40,column:84}},type:"if",locations:[{start:{line:40,column:8},end:{line:40,column:84}},{start:{line:40,column:8},end:{line:40,column:84}}],line:40},"7":{loc:{start:{line:41,column:8},end:{line:41,column:114}},type:"if",locations:[{start:{line:41,column:8},end:{line:41,column:114}},{start:{line:41,column:8},end:{line:41,column:114}}],line:41},"8":{loc:{start:{line:42,column:8},end:{line:42,column:131}},type:"if",locations:[{start:{line:42,column:8},end:{line:42,column:131}},{start:{line:42,column:8},end:{line:42,column:131}}],line:42},"9":{loc:{start:{line:43,column:8},end:{line:43,column:96}},type:"if",locations:[{start:{line:43,column:8},end:{line:43,column:96}},{start:{line:43,column:8},end:{line:43,column:96}}],line:43}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0,0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_2pkuyvwq48.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _validator=(cov_2pkuyvwq48.s[1]++,require('../validators/validator'));var _validator2=(cov_2pkuyvwq48.s[2]++,_interopRequireDefault(_validator));function _interopRequireDefault(obj){cov_2pkuyvwq48.f[0]++;cov_2pkuyvwq48.s[3]++;return(cov_2pkuyvwq48.b[1][0]++,obj)&&(cov_2pkuyvwq48.b[1][1]++,obj.__esModule)?(cov_2pkuyvwq48.b[0][0]++,obj):(cov_2pkuyvwq48.b[0][1]++,{default:obj});}// import pool from '../db/config';
class Inspect{static signup(req,res,next){cov_2pkuyvwq48.f[1]++;cov_2pkuyvwq48.s[4]++;const response400=message=>{cov_2pkuyvwq48.f[2]++;cov_2pkuyvwq48.s[5]++;return res.status(400).json({status:400,error:message});};const{firstname,lastname,othernames,username,phoneNumber,email,password,confirmPassword,picture,adminSecret}=(cov_2pkuyvwq48.s[6]++,req.body);const requiredFields=(cov_2pkuyvwq48.s[7]++,[firstname,lastname,phoneNumber,email,password,confirmPassword]);const missingFields=(cov_2pkuyvwq48.s[8]++,requiredFields.map((field,index)=>{cov_2pkuyvwq48.f[3]++;const keys=(cov_2pkuyvwq48.s[9]++,{0:'firstname',1:'lastname',2:'phoneNumber',3:'email',4:'password',5:'confirm password'});cov_2pkuyvwq48.s[10]++;return(cov_2pkuyvwq48.b[3][0]++,field===undefined)||(cov_2pkuyvwq48.b[3][1]++,field==='')?(cov_2pkuyvwq48.b[2][0]++,keys[index]):(cov_2pkuyvwq48.b[2][1]++,null);}).filter(field=>{cov_2pkuyvwq48.f[4]++;cov_2pkuyvwq48.s[11]++;return field!==null;}).join(', '));cov_2pkuyvwq48.s[12]++;if((cov_2pkuyvwq48.b[5][0]++,!firstname)||(cov_2pkuyvwq48.b[5][1]++,!lastname)||(cov_2pkuyvwq48.b[5][2]++,!phoneNumber)||(cov_2pkuyvwq48.b[5][3]++,!email)||(cov_2pkuyvwq48.b[5][4]++,!password)||(cov_2pkuyvwq48.b[5][5]++,!confirmPassword)){cov_2pkuyvwq48.b[4][0]++;cov_2pkuyvwq48.s[13]++;return response400(`values are required form the following fields: ${missingFields}`);}else{cov_2pkuyvwq48.b[4][1]++;}cov_2pkuyvwq48.s[14]++;const response=message=>{cov_2pkuyvwq48.f[5]++;cov_2pkuyvwq48.s[15]++;return res.status(400).json({status:'error',message});};cov_2pkuyvwq48.s[16]++;if(!_validator2.default.isValidName(name)){cov_2pkuyvwq48.b[6][0]++;cov_2pkuyvwq48.s[17]++;return response('invalid name');}else{cov_2pkuyvwq48.b[6][1]++;}cov_2pkuyvwq48.s[18]++;if(_validator2.default.isEmail(email).error){cov_2pkuyvwq48.b[7][0]++;cov_2pkuyvwq48.s[19]++;return response(_validator2.default.isEmail(email).message);}else{cov_2pkuyvwq48.b[7][1]++;}cov_2pkuyvwq48.s[20]++;if(!_validator2.default.isMatchingPasswords(password,confirmPassword)){cov_2pkuyvwq48.b[8][0]++;cov_2pkuyvwq48.s[21]++;return response('the two passwords do not match');}else{cov_2pkuyvwq48.b[8][1]++;}cov_2pkuyvwq48.s[22]++;if(!_validator2.default.isValidPassword(password)){cov_2pkuyvwq48.b[9][0]++;cov_2pkuyvwq48.s[23]++;return response('invalid password');}else{cov_2pkuyvwq48.b[9][1]++;}cov_2pkuyvwq48.s[24]++;req.name=name.trim();cov_2pkuyvwq48.s[25]++;req.email=email.trim();cov_2pkuyvwq48.s[26]++;req.password=password.trim();cov_2pkuyvwq48.s[27]++;req.adminSecret=adminSecret;cov_2pkuyvwq48.s[28]++;return next();}// end static signup
}//END Inspect
cov_2pkuyvwq48.s[29]++;exports.default=Inspect;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluc3BlY3Rvci5qcyJdLCJuYW1lcyI6WyJJbnNwZWN0Iiwic2lnbnVwIiwicmVxIiwicmVzIiwibmV4dCIsInJlc3BvbnNlNDAwIiwibWVzc2FnZSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImZpcnN0bmFtZSIsImxhc3RuYW1lIiwib3RoZXJuYW1lcyIsInVzZXJuYW1lIiwicGhvbmVOdW1iZXIiLCJlbWFpbCIsInBhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwicGljdHVyZSIsImFkbWluU2VjcmV0IiwiYm9keSIsInJlcXVpcmVkRmllbGRzIiwibWlzc2luZ0ZpZWxkcyIsIm1hcCIsImZpZWxkIiwiaW5kZXgiLCJrZXlzIiwidW5kZWZpbmVkIiwiZmlsdGVyIiwiam9pbiIsInJlc3BvbnNlIiwiVmFsaWRhdG9yIiwiaXNWYWxpZE5hbWUiLCJuYW1lIiwiaXNFbWFpbCIsImlzTWF0Y2hpbmdQYXNzd29yZHMiLCJpc1ZhbGlkUGFzc3dvcmQiLCJ0cmltIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7Ozs7O0FBQ0E7O0FBRUEsTUFBTUEsT0FBTixDQUFjOztBQUVWLFdBQU9DLE1BQVAsQ0FBY0MsR0FBZCxFQUFtQkMsR0FBbkIsRUFBd0JDLElBQXhCLEVBQThCO0FBQzFCLGNBQU1DLGNBQWNDLFdBQVdILElBQUlJLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixFQUFDRCxRQUFPLEdBQVIsRUFBYUUsT0FBTUgsT0FBbkIsRUFBckIsQ0FBL0I7QUFDQSxjQUFNLEVBQUVJLFNBQUYsRUFBYUMsUUFBYixFQUF1QkMsVUFBdkIsRUFBbUNDLFFBQW5DLEVBQTZDQyxXQUE3QyxFQUEwREMsS0FBMUQsRUFBaUVDLFFBQWpFLEVBQTJFQyxlQUEzRSxFQUE0RkMsT0FBNUYsRUFBcUdDLFdBQXJHLEtBQXFIakIsSUFBSWtCLElBQS9IOztBQUVBLGNBQU1DLGlCQUFpQixDQUFDWCxTQUFELEVBQVlDLFFBQVosRUFBc0JHLFdBQXRCLEVBQW1DQyxLQUFuQyxFQUEwQ0MsUUFBMUMsRUFBb0RDLGVBQXBELENBQXZCO0FBQ0EsY0FBTUssZ0JBQWdCRCxlQUFlRSxHQUFmLENBQW1CLENBQUNDLEtBQUQsRUFBUUMsS0FBUixLQUFrQjtBQUN2RCxrQkFBTUMsT0FBTztBQUNULG1CQUFHLFdBRE07QUFFVCxtQkFBRyxVQUZNO0FBR1QsbUJBQUcsYUFITTtBQUlULG1CQUFHLE9BSk07QUFLVCxtQkFBRyxVQUxNO0FBTVQsbUJBQUc7QUFOTSxhQUFiO0FBUUEsbUJBQVFGLFVBQVVHLFNBQVYsSUFBdUJILFVBQVUsRUFBbEMsR0FBd0NFLEtBQUtELEtBQUwsQ0FBeEMsR0FBc0QsSUFBN0Q7QUFDSCxTQVZxQixFQVVuQkcsTUFWbUIsQ0FVWkosU0FBU0EsVUFBVSxJQVZQLEVBVWFLLElBVmIsQ0FVa0IsSUFWbEIsQ0FBdEI7O0FBWUEsWUFBSSxDQUFDbkIsU0FBRCxJQUFjLENBQUNDLFFBQWYsSUFBMkIsQ0FBQ0csV0FBNUIsSUFBMkMsQ0FBQ0MsS0FBNUMsSUFBcUQsQ0FBQ0MsUUFBdEQsSUFBa0UsQ0FBQ0MsZUFBdkUsRUFBd0Y7QUFDcEYsbUJBQU9aLFlBQWEsa0RBQWlEaUIsYUFBYyxFQUE1RSxDQUFQO0FBQ0g7O0FBRUQsY0FBTVEsV0FBV3hCLFdBQVdILElBQUlJLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixFQUFFRCxRQUFRLE9BQVYsRUFBbUJELE9BQW5CLEVBQXJCLENBQTVCOztBQUVBLFlBQUksQ0FBQ3lCLG9CQUFVQyxXQUFWLENBQXNCQyxJQUF0QixDQUFMLEVBQWtDLE9BQU9ILFNBQVMsY0FBVCxDQUFQO0FBQ2xDLFlBQUlDLG9CQUFVRyxPQUFWLENBQWtCbkIsS0FBbEIsRUFBeUJOLEtBQTdCLEVBQW9DLE9BQU9xQixTQUFTQyxvQkFBVUcsT0FBVixDQUFrQm5CLEtBQWxCLEVBQXlCVCxPQUFsQyxDQUFQO0FBQ3BDLFlBQUksQ0FBQ3lCLG9CQUFVSSxtQkFBVixDQUE4Qm5CLFFBQTlCLEVBQXdDQyxlQUF4QyxDQUFMLEVBQStELE9BQU9hLFNBQVMsZ0NBQVQsQ0FBUDtBQUMvRCxZQUFJLENBQUNDLG9CQUFVSyxlQUFWLENBQTBCcEIsUUFBMUIsQ0FBTCxFQUEwQyxPQUFPYyxTQUFTLGtCQUFULENBQVA7O0FBRTFDNUIsWUFBSStCLElBQUosR0FBV0EsS0FBS0ksSUFBTCxFQUFYO0FBQ0FuQyxZQUFJYSxLQUFKLEdBQVlBLE1BQU1zQixJQUFOLEVBQVo7QUFDQW5DLFlBQUljLFFBQUosR0FBZUEsU0FBU3FCLElBQVQsRUFBZjtBQUNBbkMsWUFBSWlCLFdBQUosR0FBa0JBLFdBQWxCO0FBQ0EsZUFBT2YsTUFBUDtBQUVILEtBcENTLENBb0NSOztBQXBDUSxDLENBc0NaOztrQkFFYUosTyIsImZpbGUiOiJpbnNwZWN0b3IuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvZW5lamFrYy9Eb2N1bWVudHMvcHJvamVjdHMvaXJlcG9ydGVyLWRiLXByYWN0aWNlL3NlcnZlci9taWRkbGV3YXJlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFZhbGlkYXRvciBmcm9tICcuLi92YWxpZGF0b3JzL3ZhbGlkYXRvcic7XG4vLyBpbXBvcnQgcG9vbCBmcm9tICcuLi9kYi9jb25maWcnO1xuXG5jbGFzcyBJbnNwZWN0IHtcblxuICAgIHN0YXRpYyBzaWdudXAocmVxLCByZXMsIG5leHQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2U0MDAgPSBtZXNzYWdlID0+IHJlcy5zdGF0dXMoNDAwKS5qc29uKHtzdGF0dXM6NDAwLCBlcnJvcjptZXNzYWdlfSk7XG4gICAgICAgIGNvbnN0IHsgZmlyc3RuYW1lLCBsYXN0bmFtZSwgb3RoZXJuYW1lcywgdXNlcm5hbWUsIHBob25lTnVtYmVyLCBlbWFpbCwgcGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZCwgcGljdHVyZSwgYWRtaW5TZWNyZXQgfSA9IHJlcS5ib2R5O1xuXG4gICAgICAgIGNvbnN0IHJlcXVpcmVkRmllbGRzID0gW2ZpcnN0bmFtZSwgbGFzdG5hbWUsIHBob25lTnVtYmVyLCBlbWFpbCwgcGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZF07XG4gICAgICAgIGNvbnN0IG1pc3NpbmdGaWVsZHMgPSByZXF1aXJlZEZpZWxkcy5tYXAoKGZpZWxkLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5cyA9IHtcbiAgICAgICAgICAgICAgICAwOiAnZmlyc3RuYW1lJyxcbiAgICAgICAgICAgICAgICAxOiAnbGFzdG5hbWUnLFxuICAgICAgICAgICAgICAgIDI6ICdwaG9uZU51bWJlcicsXG4gICAgICAgICAgICAgICAgMzogJ2VtYWlsJyxcbiAgICAgICAgICAgICAgICA0OiAncGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgIDU6ICdjb25maXJtIHBhc3N3b3JkJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiAoZmllbGQgPT09IHVuZGVmaW5lZCB8fCBmaWVsZCA9PT0gJycpID8ga2V5c1tpbmRleF0gOiBudWxsO1xuICAgICAgICB9KS5maWx0ZXIoZmllbGQgPT4gZmllbGQgIT09IG51bGwpLmpvaW4oJywgJyk7XG5cbiAgICAgICAgaWYgKCFmaXJzdG5hbWUgfHwgIWxhc3RuYW1lIHx8ICFwaG9uZU51bWJlciB8fCAhZW1haWwgfHwgIXBhc3N3b3JkIHx8ICFjb25maXJtUGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTQwMChgdmFsdWVzIGFyZSByZXF1aXJlZCBmb3JtIHRoZSBmb2xsb3dpbmcgZmllbGRzOiAke21pc3NpbmdGaWVsZHN9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IG1lc3NhZ2UgPT4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2UgfSk7XG5cbiAgICAgICAgaWYgKCFWYWxpZGF0b3IuaXNWYWxpZE5hbWUobmFtZSkpIHJldHVybiByZXNwb25zZSgnaW52YWxpZCBuYW1lJyk7XG4gICAgICAgIGlmIChWYWxpZGF0b3IuaXNFbWFpbChlbWFpbCkuZXJyb3IpIHJldHVybiByZXNwb25zZShWYWxpZGF0b3IuaXNFbWFpbChlbWFpbCkubWVzc2FnZSk7XG4gICAgICAgIGlmICghVmFsaWRhdG9yLmlzTWF0Y2hpbmdQYXNzd29yZHMocGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZCkpIHJldHVybiByZXNwb25zZSgndGhlIHR3byBwYXNzd29yZHMgZG8gbm90IG1hdGNoJyk7XG4gICAgICAgIGlmICghVmFsaWRhdG9yLmlzVmFsaWRQYXNzd29yZChwYXNzd29yZCkpIHJldHVybiByZXNwb25zZSgnaW52YWxpZCBwYXNzd29yZCcpO1xuXG4gICAgICAgIHJlcS5uYW1lID0gbmFtZS50cmltKCk7XG4gICAgICAgIHJlcS5lbWFpbCA9IGVtYWlsLnRyaW0oKTtcbiAgICAgICAgcmVxLnBhc3N3b3JkID0gcGFzc3dvcmQudHJpbSgpO1xuICAgICAgICByZXEuYWRtaW5TZWNyZXQgPSBhZG1pblNlY3JldDtcbiAgICAgICAgcmV0dXJuIG5leHQoKTtcblxuICAgIH0gLy8gZW5kIHN0YXRpYyBzaWdudXBcblxufSAvL0VORCBJbnNwZWN0XG5cbmV4cG9ydCBkZWZhdWx0IEluc3BlY3Q7Il19
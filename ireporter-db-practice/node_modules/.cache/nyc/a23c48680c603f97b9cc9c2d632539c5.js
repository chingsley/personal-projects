'use strict';var cov_hqht0tf72=function(){var path="/home/enejakc/Documents/projects/ireporter-db-practice/server/controllers/authController.js",hash="372a96972ecf6cb19e3e8088beb4224df8c4f8b4",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/enejakc/Documents/projects/ireporter-db-practice/server/controllers/authController.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:14},end:{line:7,column:31}},"2":{start:{line:9,column:15},end:{line:9,column:46}},"3":{start:{line:11,column:14},end:{line:11,column:37}},"4":{start:{line:13,column:15},end:{line:13,column:46}},"5":{start:{line:15,column:39},end:{line:15,column:93}},"6":{start:{line:17,column:33},end:{line:17,column:456}},"7":{start:{line:17,column:64},end:{line:17,column:89}},"8":{start:{line:17,column:91},end:{line:17,column:453}},"9":{start:{line:17,column:165},end:{line:17,column:263}},"10":{start:{line:17,column:182},end:{line:17,column:195}},"11":{start:{line:17,column:209},end:{line:17,column:219}},"12":{start:{line:17,column:239},end:{line:17,column:253}},"13":{start:{line:17,column:254},end:{line:17,column:261}},"14":{start:{line:17,column:264},end:{line:17,column:426}},"15":{start:{line:17,column:281},end:{line:17,column:296}},"16":{start:{line:17,column:306},end:{line:17,column:424}},"17":{start:{line:17,column:360},end:{line:17,column:380}},"18":{start:{line:17,column:401},end:{line:17,column:420}},"19":{start:{line:17,column:429},end:{line:17,column:449}},"20":{start:{line:21,column:8},end:{line:56,column:13}},"21":{start:{line:33,column:16},end:{line:33,column:19}},"22":{start:{line:34,column:28},end:{line:34,column:83}},"23":{start:{line:36,column:12},end:{line:55,column:13}},"24":{start:{line:38,column:39},end:{line:38,column:80}},"25":{start:{line:39,column:32},end:{line:50,column:62}},"26":{start:{line:51,column:16},end:{line:51,column:165}},"27":{start:{line:52,column:16},end:{line:52,column:30}},"28":{start:{line:54,column:16},end:{line:54,column:55}},"29":{start:{line:60,column:8},end:{line:62,column:13}},"30":{start:{line:61,column:12},end:{line:61,column:71}},"31":{start:{line:67,column:0},end:{line:67,column:33}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:15,column:9},end:{line:15,column:31}},loc:{start:{line:15,column:37},end:{line:15,column:95}},line:15},"1":{name:"_asyncToGenerator",decl:{start:{line:17,column:9},end:{line:17,column:26}},loc:{start:{line:17,column:31},end:{line:17,column:458}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:40},end:{line:17,column:41}},loc:{start:{line:17,column:52},end:{line:17,column:455}},line:17},"3":{name:"(anonymous_3)",decl:{start:{line:17,column:110},end:{line:17,column:111}},loc:{start:{line:17,column:137},end:{line:17,column:451}},line:17},"4":{name:"step",decl:{start:{line:17,column:148},end:{line:17,column:152}},loc:{start:{line:17,column:163},end:{line:17,column:428}},line:17},"5":{name:"(anonymous_5)",decl:{start:{line:17,column:341},end:{line:17,column:342}},loc:{start:{line:17,column:358},end:{line:17,column:382}},line:17},"6":{name:"(anonymous_6)",decl:{start:{line:17,column:384},end:{line:17,column:385}},loc:{start:{line:17,column:399},end:{line:17,column:422}},line:17},"7":{name:"(anonymous_7)",decl:{start:{line:20,column:4},end:{line:20,column:5}},loc:{start:{line:20,column:34},end:{line:57,column:5}},line:20},"8":{name:"(anonymous_8)",decl:{start:{line:21,column:33},end:{line:21,column:34}},loc:{start:{line:21,column:46},end:{line:56,column:9}},line:21},"9":{name:"(anonymous_9)",decl:{start:{line:59,column:4},end:{line:59,column:5}},loc:{start:{line:59,column:34},end:{line:63,column:5}},line:59},"10":{name:"(anonymous_10)",decl:{start:{line:60,column:33},end:{line:60,column:34}},loc:{start:{line:60,column:46},end:{line:62,column:9}},line:60}},branchMap:{"0":{loc:{start:{line:15,column:46},end:{line:15,column:92}},type:"cond-expr",locations:[{start:{line:15,column:70},end:{line:15,column:73}},{start:{line:15,column:76},end:{line:15,column:92}}],line:15},"1":{loc:{start:{line:15,column:46},end:{line:15,column:67}},type:"binary-expr",locations:[{start:{line:15,column:46},end:{line:15,column:49}},{start:{line:15,column:53},end:{line:15,column:67}}],line:15},"2":{loc:{start:{line:17,column:264},end:{line:17,column:426}},type:"if",locations:[{start:{line:17,column:264},end:{line:17,column:426}},{start:{line:17,column:264},end:{line:17,column:426}}],line:17},"3":{loc:{start:{line:34,column:28},end:{line:34,column:83}},type:"cond-expr",locations:[{start:{line:34,column:71},end:{line:34,column:75}},{start:{line:34,column:78},end:{line:34,column:83}}],line:34}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_hqht0tf72.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _bcrypt=(cov_hqht0tf72.s[1]++,require('bcrypt'));var _bcrypt2=(cov_hqht0tf72.s[2]++,_interopRequireDefault(_bcrypt));var _config=(cov_hqht0tf72.s[3]++,require('../db/config'));var _config2=(cov_hqht0tf72.s[4]++,_interopRequireDefault(_config));function _interopRequireDefault(obj){cov_hqht0tf72.f[0]++;cov_hqht0tf72.s[5]++;return(cov_hqht0tf72.b[1][0]++,obj)&&(cov_hqht0tf72.b[1][1]++,obj.__esModule)?(cov_hqht0tf72.b[0][0]++,obj):(cov_hqht0tf72.b[0][1]++,{default:obj});}function _asyncToGenerator(fn){cov_hqht0tf72.f[1]++;cov_hqht0tf72.s[6]++;return function(){cov_hqht0tf72.f[2]++;var gen=(cov_hqht0tf72.s[7]++,fn.apply(this,arguments));cov_hqht0tf72.s[8]++;return new Promise(function(resolve,reject){cov_hqht0tf72.f[3]++;function step(key,arg){cov_hqht0tf72.f[4]++;cov_hqht0tf72.s[9]++;try{var info=(cov_hqht0tf72.s[10]++,gen[key](arg));var value=(cov_hqht0tf72.s[11]++,info.value);}catch(error){cov_hqht0tf72.s[12]++;reject(error);cov_hqht0tf72.s[13]++;return;}cov_hqht0tf72.s[14]++;if(info.done){cov_hqht0tf72.b[2][0]++;cov_hqht0tf72.s[15]++;resolve(value);}else{cov_hqht0tf72.b[2][1]++;cov_hqht0tf72.s[16]++;return Promise.resolve(value).then(function(value){cov_hqht0tf72.f[5]++;cov_hqht0tf72.s[17]++;step("next",value);},function(err){cov_hqht0tf72.f[6]++;cov_hqht0tf72.s[18]++;step("throw",err);});}}cov_hqht0tf72.s[19]++;return step("next");});};}class AuthController{static signup(req,res,next){cov_hqht0tf72.f[7]++;cov_hqht0tf72.s[20]++;return _asyncToGenerator(function*(){cov_hqht0tf72.f[8]++;const{firstname,lastname,othernames,username,phoneNumber,email,password,picture,registered,adminSecret}=(cov_hqht0tf72.s[21]++,req);const isAdmin=(cov_hqht0tf72.s[22]++,adminSecret===process.env.ADMIN_SECRET?(cov_hqht0tf72.b[3][0]++,true):(cov_hqht0tf72.b[3][1]++,false));cov_hqht0tf72.s[23]++;try{// Hash password and save user to database
const hashedPassword=(cov_hqht0tf72.s[24]++,yield _bcrypt2.default.hash(password,10));const dbQuery=(cov_hqht0tf72.s[25]++,`INSERT INTO users(
                firstname,
                lastname,
                othernames,
                username,
                phonenumber,
                email,
                password,
                picture,
                registered,
                is_admin,
            ) VALUES($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)`);cov_hqht0tf72.s[26]++;yield _config2.default.query(dbQuery,[firstname,lastname,othernames,username,phoneNumber,email,hashedPassword,picture,registered,isAdmin]);cov_hqht0tf72.s[27]++;return next();}catch(error){cov_hqht0tf72.s[28]++;return res.status(400).json({error});}})();}// END signup
static signin(req,res,next){cov_hqht0tf72.f[9]++;cov_hqht0tf72.s[29]++;return _asyncToGenerator(function*(){cov_hqht0tf72.f[10]++;cov_hqht0tf72.s[30]++;res.send({message:'welcome to the sign in controller'});})();}}// END AuthController
cov_hqht0tf72.s[31]++;exports.default=AuthController;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkF1dGhDb250cm9sbGVyIiwic2lnbnVwIiwicmVxIiwicmVzIiwibmV4dCIsImZpcnN0bmFtZSIsImxhc3RuYW1lIiwib3RoZXJuYW1lcyIsInVzZXJuYW1lIiwicGhvbmVOdW1iZXIiLCJlbWFpbCIsInBhc3N3b3JkIiwicGljdHVyZSIsInJlZ2lzdGVyZWQiLCJhZG1pblNlY3JldCIsImlzQWRtaW4iLCJwcm9jZXNzIiwiZW52IiwiQURNSU5fU0VDUkVUIiwiaGFzaGVkUGFzc3dvcmQiLCJiY3J5cHQiLCJoYXNoIiwiZGJRdWVyeSIsInBvb2wiLCJxdWVyeSIsImVycm9yIiwic3RhdHVzIiwianNvbiIsInNpZ25pbiIsInNlbmQiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUNBOzs7Ozs7OztBQUVBLE1BQU1BLGNBQU4sQ0FBcUI7QUFDakIsV0FBYUMsTUFBYixDQUFvQkMsR0FBcEIsRUFBeUJDLEdBQXpCLEVBQThCQyxJQUE5QixFQUFvQztBQUFBO0FBQ2hDLGtCQUFNO0FBQ0ZDLHlCQURFO0FBRUZDLHdCQUZFO0FBR0ZDLDBCQUhFO0FBSUZDLHdCQUpFO0FBS0ZDLDJCQUxFO0FBTUZDLHFCQU5FO0FBT0ZDLHdCQVBFO0FBUUZDLHVCQVJFO0FBU0ZDLDBCQVRFO0FBVUZDO0FBVkUsZ0JBV0ZaLEdBWEo7QUFZQSxrQkFBTWEsVUFBVUQsZ0JBQWdCRSxRQUFRQyxHQUFSLENBQVlDLFlBQTVCLEdBQTJDLElBQTNDLEdBQWtELEtBQWxFOztBQUVBLGdCQUFJO0FBQ0E7QUFDQSxzQkFBTUMsaUJBQWlCLE1BQU1DLGlCQUFPQyxJQUFQLENBQVlWLFFBQVosRUFBc0IsRUFBdEIsQ0FBN0I7QUFDQSxzQkFBTVcsVUFBVzs7Ozs7Ozs7Ozs7OERBQWpCO0FBWUEsc0JBQU1DLGlCQUFLQyxLQUFMLENBQVdGLE9BQVgsRUFBb0IsQ0FDdEJqQixTQURzQixFQUV0QkMsUUFGc0IsRUFHdEJDLFVBSHNCLEVBSXRCQyxRQUpzQixFQUt0QkMsV0FMc0IsRUFNdEJDLEtBTnNCLEVBT3RCUyxjQVBzQixFQVF0QlAsT0FSc0IsRUFTdEJDLFVBVHNCLEVBVXRCRSxPQVZzQixDQUFwQixDQUFOO0FBWUEsdUJBQU9YLE1BQVA7QUFDSCxhQTVCRCxDQTRCRSxPQUFPcUIsS0FBUCxFQUFjO0FBQ1osdUJBQU90QixJQUFJdUIsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLEVBQUVGLEtBQUYsRUFBckIsQ0FBUDtBQUNIO0FBN0MrQjtBQThDbkMsS0EvQ2dCLENBK0NoQjs7QUFFRCxXQUFhRyxNQUFiLENBQW9CMUIsR0FBcEIsRUFBeUJDLEdBQXpCLEVBQThCQyxJQUE5QixFQUFvQztBQUFBO0FBQ2hDRCxnQkFBSTBCLElBQUosQ0FBUyxFQUFDQyxTQUFTLG1DQUFWLEVBQVQ7QUFEZ0M7QUFFbkM7O0FBbkRnQixDLENBcURuQjs7a0JBRWE5QixjIiwiZmlsZSI6ImF1dGhDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL2VuZWpha2MvRG9jdW1lbnRzL3Byb2plY3RzL2lyZXBvcnRlci1kYi1wcmFjdGljZS9zZXJ2ZXIvY29udHJvbGxlcnMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG5pbXBvcnQgcG9vbCBmcm9tICcuLi9kYi9jb25maWcnO1xuXG5jbGFzcyBBdXRoQ29udHJvbGxlciB7XG4gICAgc3RhdGljIGFzeW5jIHNpZ251cChyZXEsIHJlcywgbmV4dCkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBmaXJzdG5hbWUsXG4gICAgICAgICAgICBsYXN0bmFtZSxcbiAgICAgICAgICAgIG90aGVybmFtZXMsXG4gICAgICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgICAgIHBob25lTnVtYmVyLFxuICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgICAgIHBpY3R1cmUsXG4gICAgICAgICAgICByZWdpc3RlcmVkLFxuICAgICAgICAgICAgYWRtaW5TZWNyZXQsXG4gICAgICAgIH0gPSByZXE7XG4gICAgICAgIGNvbnN0IGlzQWRtaW4gPSBhZG1pblNlY3JldCA9PT0gcHJvY2Vzcy5lbnYuQURNSU5fU0VDUkVUID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBIYXNoIHBhc3N3b3JkIGFuZCBzYXZlIHVzZXIgdG8gZGF0YWJhc2VcbiAgICAgICAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcbiAgICAgICAgICAgIGNvbnN0IGRiUXVlcnkgPSBgSU5TRVJUIElOVE8gdXNlcnMoXG4gICAgICAgICAgICAgICAgZmlyc3RuYW1lLFxuICAgICAgICAgICAgICAgIGxhc3RuYW1lLFxuICAgICAgICAgICAgICAgIG90aGVybmFtZXMsXG4gICAgICAgICAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgcGhvbmVudW1iZXIsXG4gICAgICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgcGljdHVyZSxcbiAgICAgICAgICAgICAgICByZWdpc3RlcmVkLFxuICAgICAgICAgICAgICAgIGlzX2FkbWluLFxuICAgICAgICAgICAgKSBWQUxVRVMoJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4LCAkOSwgJDEwKWA7XG4gICAgICAgICAgICBhd2FpdCBwb29sLnF1ZXJ5KGRiUXVlcnksIFtcbiAgICAgICAgICAgICAgICBmaXJzdG5hbWUsXG4gICAgICAgICAgICAgICAgbGFzdG5hbWUsXG4gICAgICAgICAgICAgICAgb3RoZXJuYW1lcyxcbiAgICAgICAgICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICBwaG9uZU51bWJlcixcbiAgICAgICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgICAgICBoYXNoZWRQYXNzd29yZCxcbiAgICAgICAgICAgICAgICBwaWN0dXJlLFxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyZWQsXG4gICAgICAgICAgICAgICAgaXNBZG1pblxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICByZXR1cm4gbmV4dCgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3IgfSk7XG4gICAgICAgIH1cbiAgICB9Ly8gRU5EIHNpZ251cFxuXG4gICAgc3RhdGljIGFzeW5jIHNpZ25pbihyZXEsIHJlcywgbmV4dCkge1xuICAgICAgICByZXMuc2VuZCh7bWVzc2FnZTogJ3dlbGNvbWUgdG8gdGhlIHNpZ24gaW4gY29udHJvbGxlcid9KTtcbiAgICB9XG5cbn0gLy8gRU5EIEF1dGhDb250cm9sbGVyXG5cbmV4cG9ydCBkZWZhdWx0IEF1dGhDb250cm9sbGVyO1xuIl19